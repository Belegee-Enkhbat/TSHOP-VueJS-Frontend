{"ast":null,"code":"import _regeneratorRuntime from \"/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport axios from 'axios';\nimport { toast } from 'bulma-toast';\nimport ProductBox from '@/components/Productbox.vue';\nexport default {\n  name: 'Category',\n  components: {\n    ProductBox: ProductBox\n  },\n  data: function data() {\n    return {\n      category: {\n        products: []\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getCategory();\n  },\n  watch: {\n    // need to normally update category.name after click\n    $route: function $route(to, from) {\n      if (to.name === 'Category') {\n        this.getCategory();\n      }\n    }\n  },\n  methods: {\n    getCategory: function getCategory() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var categorySlug;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              categorySlug = _this.$route.params.category_slug;\n              _this.$store.commit('setIsLoading', true);\n              _context.next = 4;\n              return axios.get(\"/api/v1/products/\".concat(categorySlug, \"/\")).then(function (response) {\n                _this.category = response.data;\n                document.title = _this.category.name + ' | Glee';\n              })[\"catch\"](function (error) {\n                console.log(error);\n                toast({\n                  message: 'Something went wrong. Please try again.',\n                  type: 'is-danger',\n                  dismissible: true,\n                  pauseOnHover: true,\n                  duration: 2000,\n                  position: 'bottom-right'\n                });\n              });\n            case 4:\n              _this.$store.commit('setIsLoading', false);\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","toast","ProductBox","name","components","data","category","products","mounted","getCategory","watch","$route","to","from","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","categorySlug","wrap","_callee$","_context","prev","next","params","category_slug","$store","commit","get","concat","then","response","document","title","error","console","log","message","type","dismissible","pauseOnHover","duration","position","stop"],"sources":["/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/src/views/Category.vue"],"sourcesContent":["<template>\n    <div class=\"page-category\">\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h2 class=\"is-size-2 has-text-centered\">{{ category.name }}</h2>\n            </div>\n        \n        <ProductBox \n        v-for=\"product in category.products\"\n        v-bind:key=\"product.id\"\n        v-bind:product=\"product\" />\n\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\n\nimport ProductBox from '@/components/Productbox.vue'\n\n\n\n\nexport default {\n    name: 'Category',\n    components: {\n        ProductBox\n    },\n    data() {\n        return {\n            category: {\n                products: []\n            }\n        }\n    },\n    mounted() {\n        this.getCategory()\n    },\n    watch: {\n        // need to normally update category.name after click\n        $route(to, from) {\n            if (to.name === 'Category') {\n                this.getCategory()\n            }\n        }\n    },\n    methods: {\n        async getCategory() {\n            const categorySlug = this.$route.params.category_slug\n\n            this.$store.commit('setIsLoading', true)\n\n            await axios\n                .get(`/api/v1/products/${categorySlug}/`)\n                .then(response => {\n                    this.category = response.data\n\n                    document.title = this.category.name + ' | Glee'\n                })\n                .catch(error => {\n                    console.log(error)\n\n                    toast({\n                        message: 'Something went wrong. Please try again.',\n                        type: 'is-danger',\n                        dismissible: true,\n                        pauseOnHover: true,\n                        duration: 2000,\n                        position: 'bottom-right',\n                    })\n                })\n\n            this.$store.commit('setIsLoading', false)\n        }\n    }\n}\n</script>"],"mappings":";;;AAiBA,OAAOA,KAAI,MAAO,OAAM;AACxB,SAASC,KAAI,QAAS,aAAY;AAElC,OAAOC,UAAS,MAAO,6BAA4B;AAKnD,eAAe;EACXC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACRF,UAAS,EAATA;EACJ,CAAC;EACDG,IAAI,WAAAA,KAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE;QACNC,QAAQ,EAAE;MACd;IACJ;EACJ,CAAC;EACDC,OAAO,WAAAA,QAAA,EAAG;IACN,IAAI,CAACC,WAAW,CAAC;EACrB,CAAC;EACDC,KAAK,EAAE;IACH;IACAC,MAAM,WAAAA,OAACC,EAAE,EAAEC,IAAI,EAAE;MACb,IAAID,EAAE,CAACT,IAAG,KAAM,UAAU,EAAE;QACxB,IAAI,CAACM,WAAW,CAAC;MACrB;IACJ;EACJ,CAAC;EACDK,OAAO,EAAE;IACCL,WAAW,WAAAA,YAAA,EAAG;MAAA,IAAAM,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,YAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACVL,YAAW,GAAIL,KAAI,CAACJ,MAAM,CAACe,MAAM,CAACC,aAAY;cAEpDZ,KAAI,CAACa,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,IAAI;cAAAN,QAAA,CAAAE,IAAA;cAAA,OAEjCzB,KAAI,CACL8B,GAAG,qBAAAC,MAAA,CAAqBX,YAAY,MAAG,EACvCY,IAAI,CAAC,UAAAC,QAAO,EAAK;gBACdlB,KAAI,CAACT,QAAO,GAAI2B,QAAQ,CAAC5B,IAAG;gBAE5B6B,QAAQ,CAACC,KAAI,GAAIpB,KAAI,CAACT,QAAQ,CAACH,IAAG,GAAI,SAAQ;cAClD,CAAC,UACK,CAAC,UAAAiC,KAAI,EAAK;gBACZC,OAAO,CAACC,GAAG,CAACF,KAAK;gBAEjBnC,KAAK,CAAC;kBACFsC,OAAO,EAAE,yCAAyC;kBAClDC,IAAI,EAAE,WAAW;kBACjBC,WAAW,EAAE,IAAI;kBACjBC,YAAY,EAAE,IAAI;kBAClBC,QAAQ,EAAE,IAAI;kBACdC,QAAQ,EAAE;gBACd,CAAC;cACL,CAAC;YAAA;cAEL7B,KAAI,CAACa,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,KAAK;YAAA;YAAA;cAAA,OAAAN,QAAA,CAAAsB,IAAA;UAAA;QAAA,GAAA1B,OAAA;MAAA;IAC5C;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}