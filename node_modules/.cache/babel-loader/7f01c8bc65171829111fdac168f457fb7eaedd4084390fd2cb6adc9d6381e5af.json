{"ast":null,"code":"import _regeneratorRuntime from \"/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { ref } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'ManageProduct',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var postData = ref({\n      name: '',\n      slug: '',\n      description: '',\n      price: 0.00,\n      category_id: 1,\n      // Default or dynamic category ID\n      image: null,\n      thumbnail: null\n    });\n    function handleFileUpload(type, event) {\n      var file = event.target.files[0];\n      if (file && file.type.startsWith('image/')) {\n        var reader = new FileReader();\n        reader.onload = function (e) {\n          postData.value[type] = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      } else {\n        console.error('Please upload an image file.');\n      }\n    }\n    var submitPost = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var formData, csrfToken, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              formData = new FormData();\n              Object.entries(postData.value).forEach(function (_ref3) {\n                var _ref4 = _slicedToArray(_ref3, 2),\n                  key = _ref4[0],\n                  value = _ref4[1];\n                formData.append(key, value);\n              });\n              _context.prev = 2;\n              csrfToken = getCookie('csrftoken');\n              _context.next = 6;\n              return axios.post('/api/v1/products/create_product', formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data',\n                  'X-CSRFToken': csrfToken\n                }\n              });\n            case 6:\n              response = _context.sent;\n              console.log('Response status:', response.status);\n              if (response.status === 201) {\n                console.log('Post created successfully:', response.data);\n                postData.value = _objectSpread({}, initialData);\n              } else {\n                console.error('Failed to create post:', response.status, response.data);\n              }\n              _context.next = 14;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              console.error('Error creating post:', _context.t0);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 11]]);\n      }));\n      return function submitPost() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // Utility to fetch CSRF token\n    function getCookie(name) {\n      var cookieValue = null;\n      if (document.cookie && document.cookie !== '') {\n        var cookies = document.cookie.split(';');\n        for (var i = 0; i < cookies.length; i++) {\n          var cookie = cookies[i].trim();\n          if (cookie.substring(0, name.length + 1) === name + '=') {\n            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n            break;\n          }\n        }\n      }\n      return cookieValue;\n    }\n    var __returned__ = {\n      postData: postData,\n      handleFileUpload: handleFileUpload,\n      submitPost: submitPost,\n      getCookie: getCookie,\n      ref: ref,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","postData","name","slug","description","price","category_id","image","thumbnail","handleFileUpload","type","event","file","target","files","startsWith","reader","FileReader","onload","e","value","result","readAsDataURL","console","error","submitPost","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","csrfToken","response","wrap","_callee$","_context","prev","next","FormData","Object","entries","forEach","_ref3","_ref4","_slicedToArray","key","append","getCookie","post","headers","sent","log","status","data","_objectSpread","initialData","t0","stop","apply","arguments","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent"],"sources":["/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/src/views/ManageProduct.vue"],"sourcesContent":["<template>\n  <div class=\"form-container\">\n    <h1>Create New Product</h1>\n    <form @submit.prevent=\"submitPost\">\n      <div>\n        <label for=\"name\">Name:</label>\n        <input type=\"text\" id=\"name\" v-model=\"postData.name\" required>\n      </div>\n      <div>\n        <label for=\"slug\">Slug:</label>\n        <input type=\"text\" id=\"slug\" v-model=\"postData.slug\" required>\n      </div>\n      <div>\n        <label for=\"description\">Description:</label>\n        <textarea id=\"description\" v-model=\"postData.description\" required></textarea>\n      </div>\n      <div>\n        <label for=\"price\">Price:</label>\n        <input type=\"number\" id=\"price\" v-model.number=\"postData.price\" required min=\"0\">\n      </div>\n      <div>\n        <label for=\"image\">Image:</label>\n        <input type=\"file\" id=\"image\" @change=\"handleFileUpload('image', $event)\">\n      </div>\n      <div>\n        <label for=\"thumbnail\">Thumbnail:</label>\n        <input type=\"file\" id=\"thumbnail\" @change=\"handleFileUpload('thumbnail', $event)\">\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  </div>\n</template>\n\n<script setup>\nimport {ref} from 'vue';\nimport axios from 'axios';\n\nconst postData = ref({\n  name: '',\n  slug: '',\n  description: '',\n  price: 0.00,\n  category_id: 1,  // Default or dynamic category ID\n  image: null,\n  thumbnail: null\n});\n\nfunction handleFileUpload(type, event) {\n  const file = event.target.files[0];\n  if (file && file.type.startsWith('image/')) {\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      postData.value[type] = e.target.result;\n    };\n    reader.readAsDataURL(file);\n  } else {\n    console.error('Please upload an image file.');\n  }\n}\n\nconst submitPost = async () => {\n  const formData = new FormData();\n  Object.entries(postData.value).forEach(([key, value]) => {\n    formData.append(key, value);\n  });\n\n  try {\n    const csrfToken = getCookie('csrftoken');\n    const response = await axios.post('/api/v1/products/create_product', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        'X-CSRFToken': csrfToken,\n      },\n    });\n    console.log('Response status:', response.status);\n    if (response.status === 201) {\n      console.log('Post created successfully:', response.data);\n      postData.value = { ...initialData };\n    } else {\n      console.error('Failed to create post:', response.status, response.data);\n    }\n  } catch (error) {\n    console.error('Error creating post:', error);\n  }\n\n};\n\n\n// Utility to fetch CSRF token\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n</script>\n\n<style scoped lang=\"scss\">\n.form-container {\n  max-width: 400px;\n  margin: 0 auto;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  background-color: #f9f9f9;\n}\n\n.form-container label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\n.form-container input[type=\"text\"],\n.form-container input[type=\"number\"],\n.form-container input[type=\"file\"],\n.form-container textarea {\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  box-sizing: border-box;\n}\n\n.form-container button {\n  padding: 8px 12px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.form-container button:hover {\n  background-color: #0056b3;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}