{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"page-my-account\"\n};\nvar _hoisted_2 = {\n  \"class\": \"columns is-multiline\"\n};\nvar _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"column is-12\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", {\n  \"class\": \"title\"\n}, \"My account\")], -1 /* HOISTED */);\nvar _hoisted_4 = {\n  \"class\": \"column is-12\"\n};\nvar _hoisted_5 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nvar _hoisted_6 = {\n  \"class\": \"column is-12\"\n};\nvar _hoisted_7 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  \"class\": \"subtitle\"\n}, \"My orders\", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_OrderSummary = _resolveComponent(\"OrderSummary\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return $options.logout();\n    }),\n    \"class\": \"button is-danger\"\n  }, \"Log out\")]), _hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orders, function (order) {\n    return _openBlock(), _createBlock(_component_OrderSummary, {\n      key: order.id,\n      order: order\n    }, null, 8 /* PROPS */, [\"order\"]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","$event","$options","logout","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","$data","orders","order","_createBlock","_component_OrderSummary","key","id"],"sources":["/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/src/views/MyAccount.vue"],"sourcesContent":["<template>\n    <div class=\"page-my-account\">\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h1 class=\"title\">My account</h1>\n            </div>\n\n            <div class=\"column is-12\">\n                <button @click=\"logout()\" class=\"button is-danger\">Log out</button>\n            </div>\n\n            <hr>\n\n            <div class=\"column is-12\">\n                <h2 class=\"subtitle\">My orders</h2>\n                <OrderSummary\n                    v-for=\"order in orders\"\n                    v-bind:key=\"order.id\"\n                    v-bind:order=\"order\" />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nimport OrderSummary from '@/components/OrderSummary.vue'\n\nexport default {\n    name: 'MyAccount',\n    components: {\n        OrderSummary\n    },\n    data() {\n        return {\n            orders: []\n        }\n    },\n    mounted() {\n        document.title = 'My account | Glee'\n\n        this.getMyOrders()\n    },\n    methods: {\n        logout() {\n            axios.defaults.headers.common[\"Authorization\"] = \"\"\n\n            localStorage.removeItem(\"token\")\n            localStorage.removeItem(\"username\")\n            localStorage.removeItem(\"userid\")\n\n            this.$store.commit('removeToken')\n\n            this.$router.push('/')\n          this.$forceUpdate();\n        },\n        async getMyOrders() {\n            this.$store.commit('setIsLoading', true)\n\n            await axios\n                .get('/api/v1/orders/')\n                .then(response => {\n                    this.orders = response.data\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n\n            this.$store.commit('setIsLoading', false)\n        }\n    }\n}\n</script>"],"mappings":";;EACS,SAAM;AAAiB;;EACnB,SAAM;AAAsB;8BAC7BA,mBAAA,CAEM;EAFD,SAAM;AAAc,I,aACrBA,mBAAA,CAAiC;EAA7B,SAAM;AAAO,GAAC,YAAU,E;;EAG3B,SAAM;AAAc;8BAIzBA,mBAAA,CAAI;;EAEC,SAAM;AAAc;8BACrBA,mBAAA,CAAmC;EAA/B,SAAM;AAAU,GAAC,WAAS;;;uBAb1CC,mBAAA,CAoBM,OApBNC,UAoBM,GAnBFF,mBAAA,CAkBM,OAlBNG,UAkBM,GAjBFC,UAEM,EAENJ,mBAAA,CAEM,OAFNK,UAEM,GADFL,mBAAA,CAAmE;IAA1DM,OAAK,EAAAC,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAAEC,QAAA,CAAAC,MAAM;IAAA;IAAI,SAAM;KAAmB,SAAO,E,GAG9DC,UAAI,EAEJX,mBAAA,CAMM,OANNY,UAMM,GALFC,UAAmC,G,kBACnCZ,mBAAA,CAG2Ba,SAAA,QAlB3CC,WAAA,CAgBoCC,KAAA,CAAAC,MAAM,EAhB1C,UAgB2BC,KAAK;yBADhBC,YAAA,CAG2BC,uBAAA;MADhBC,GAAG,EAAEH,KAAK,CAACI,EAAE;MACbJ,KAAK,EAAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}