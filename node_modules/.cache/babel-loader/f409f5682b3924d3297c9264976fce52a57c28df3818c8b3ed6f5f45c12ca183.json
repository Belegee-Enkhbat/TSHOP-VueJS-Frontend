{"ast":null,"code":"import _regeneratorRuntime from \"/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport OrderSummary from '@/components/OrderSummary.vue';\nexport default {\n  name: 'MyAccount',\n  components: {\n    OrderSummary: OrderSummary\n  },\n  data: function data() {\n    return {\n      orders: []\n    };\n  },\n  mounted: function mounted() {\n    document.title = 'My account | Glee';\n    this.getMyOrders();\n  },\n  methods: {\n    logout: function logout() {\n      axios.defaults.headers.common[\"Authorization\"] = \"\";\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"username\");\n      localStorage.removeItem(\"userid\");\n      this.$store.commit('removeToken');\n      this.$router.push('/');\n    },\n    getMyOrders: function getMyOrders() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this.$store.commit('setIsLoading', true);\n              _context.next = 3;\n              return axios.get('/api/v1/orders/').then(function (response) {\n                _this.orders = response.data;\n              })[\"catch\"](function (error) {\n                console.log(error);\n              });\n            case 3:\n              _this.$store.commit('setIsLoading', false);\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","OrderSummary","name","components","data","orders","mounted","document","title","getMyOrders","methods","logout","defaults","headers","common","localStorage","removeItem","$store","commit","$router","push","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","then","response","error","console","log","stop"],"sources":["/Users/belgee/Desktop/ICSI402-Software-Development/TeamProject/TSHOP-Frontend-VueJS/src/views/MyAccount.vue"],"sourcesContent":["<template>\n    <div class=\"page-my-account\">\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h1 class=\"title\">My account</h1>\n            </div>\n\n            <div class=\"column is-12\">\n                <button @click=\"logout()\" class=\"button is-danger\">Log out</button>\n            </div>\n\n            <hr>\n\n            <div class=\"column is-12\">\n                <h2 class=\"subtitle\">My orders</h2>\n                <OrderSummary\n                    v-for=\"order in orders\"\n                    v-bind:key=\"order.id\"\n                    v-bind:order=\"order\" />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nimport OrderSummary from '@/components/OrderSummary.vue'\n\nexport default {\n    name: 'MyAccount',\n    components: {\n        OrderSummary\n    },\n    data() {\n        return {\n            orders: []\n        }\n    },\n    mounted() {\n        document.title = 'My account | Glee'\n\n        this.getMyOrders()\n    },\n    methods: {\n        logout() {\n            axios.defaults.headers.common[\"Authorization\"] = \"\"\n\n            localStorage.removeItem(\"token\")\n            localStorage.removeItem(\"username\")\n            localStorage.removeItem(\"userid\")\n\n            this.$store.commit('removeToken')\n\n            this.$router.push('/')\n        },\n        async getMyOrders() {\n            this.$store.commit('setIsLoading', true)\n\n            await axios\n                .get('/api/v1/orders/')\n                .then(response => {\n                    this.orders = response.data\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n\n            this.$store.commit('setIsLoading', false)\n        }\n    }\n}\n</script>"],"mappings":";;;AAyBA,OAAOA,KAAI,MAAO,OAAM;AAExB,OAAOC,YAAW,MAAO,+BAA8B;AAEvD,eAAe;EACXC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IACRF,YAAW,EAAXA;EACJ,CAAC;EACDG,IAAI,WAAAA,KAAA,EAAG;IACH,OAAO;MACHC,MAAM,EAAE;IACZ;EACJ,CAAC;EACDC,OAAO,WAAAA,QAAA,EAAG;IACNC,QAAQ,CAACC,KAAI,GAAI,mBAAkB;IAEnC,IAAI,CAACC,WAAW,CAAC;EACrB,CAAC;EACDC,OAAO,EAAE;IACLC,MAAM,WAAAA,OAAA,EAAG;MACLX,KAAK,CAACY,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,EAAC;MAElDC,YAAY,CAACC,UAAU,CAAC,OAAO;MAC/BD,YAAY,CAACC,UAAU,CAAC,UAAU;MAClCD,YAAY,CAACC,UAAU,CAAC,QAAQ;MAEhC,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,aAAa;MAEhC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG;IACzB,CAAC;IACKX,WAAW,WAAAA,YAAA,EAAG;MAAA,IAAAY,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAChBT,KAAI,CAACJ,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,IAAI;cAAAU,QAAA,CAAAE,IAAA;cAAA,OAEjC9B,KAAI,CACL+B,GAAG,CAAC,iBAAiB,EACrBC,IAAI,CAAC,UAAAC,QAAO,EAAK;gBACdZ,KAAI,CAAChB,MAAK,GAAI4B,QAAQ,CAAC7B,IAAG;cAC9B,CAAC,UACK,CAAC,UAAA8B,KAAI,EAAK;gBACZC,OAAO,CAACC,GAAG,CAACF,KAAK;cACrB,CAAC;YAAA;cAELb,KAAI,CAACJ,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,KAAK;YAAA;YAAA;cAAA,OAAAU,QAAA,CAAAS,IAAA;UAAA;QAAA,GAAAZ,OAAA;MAAA;IAC5C;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}