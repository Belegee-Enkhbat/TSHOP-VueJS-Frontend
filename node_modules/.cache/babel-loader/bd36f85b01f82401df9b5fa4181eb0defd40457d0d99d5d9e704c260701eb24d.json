{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"page-sign-up\"\n};\nvar _hoisted_2 = {\n  \"class\": \"columns\"\n};\nvar _hoisted_3 = {\n  \"class\": \"column is-4 is-offset-4\"\n};\nvar _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  \"class\": \"title\"\n}, \"Sign up\", -1 /* HOISTED */);\nvar _hoisted_5 = {\n  \"class\": \"field\"\n};\nvar _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Username\", -1 /* HOISTED */);\nvar _hoisted_7 = {\n  \"class\": \"control\"\n};\nvar _hoisted_8 = {\n  \"class\": \"field\"\n};\nvar _hoisted_9 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Password\", -1 /* HOISTED */);\nvar _hoisted_10 = {\n  \"class\": \"control\"\n};\nvar _hoisted_11 = {\n  \"class\": \"field\"\n};\nvar _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Repeat password\", -1 /* HOISTED */);\nvar _hoisted_13 = {\n  \"class\": \"control\"\n};\nvar _hoisted_14 = {\n  key: 0,\n  \"class\": \"notification is-danger\"\n};\nvar _hoisted_15 = /*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"field\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"control\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  \"class\": \"button is-dark\"\n}, \"Sign up\")])], -1 /* HOISTED */);\nvar _hoisted_16 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nexport function render(_ctx, _cache) {\n  var _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers(function () {\n      return _ctx.submitForm && _ctx.submitForm.apply(_ctx, arguments);\n    }, [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"class\": \"input\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.username = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.username]])])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"class\": \"input\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return _ctx.password = $event;\n    }),\n    onInput: _cache[2] || (_cache[2] = function () {\n      return _ctx.checkPasswordStrength && _ctx.checkPasswordStrength.apply(_ctx, arguments);\n    })\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, _ctx.password]])])]), _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _createElementVNode(\"div\", _hoisted_13, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"class\": \"input\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return _ctx.password2 = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.password2]])])]), _ctx.errors.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, function (error) {\n    return _openBlock(), _createElementBlock(\"p\", {\n      key: error\n    }, _toDisplayString(error), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _hoisted_15, _hoisted_16, _createTextVNode(\" Or \"), _createVNode(_component_router_link, {\n    to: \"/log-in\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createTextVNode(\"click here\")];\n    }),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" to log in! \")], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["_createElementVNode","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","_ctx","submitForm","apply","arguments","_hoisted_5","_hoisted_6","_hoisted_7","type","$event","username","_hoisted_8","_hoisted_9","_hoisted_10","password","onInput","checkPasswordStrength","_hoisted_11","_hoisted_12","_hoisted_13","password2","errors","length","_hoisted_14","_Fragment","_renderList","error","_toDisplayString","_createCommentVNode","_hoisted_15","_hoisted_16","_createTextVNode","_createVNode","_component_router_link","to","_withCtx","_"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/SignUp.vue"],"sourcesContent":["<template>\n  <div class=\"page-sign-up\">\n    <div class=\"columns\">\n      <div class=\"column is-4 is-offset-4\">\n        <h1 class=\"title\">Sign up</h1>\n        <form @submit.prevent=\"submitForm\">\n          <div class=\"field\">\n            <label>Username</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" v-model=\"username\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>Password</label>\n            <div class=\"control\">\n              <input type=\"password\" class=\"input\" v-model=\"password\" @input=\"checkPasswordStrength\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>Repeat password</label>\n            <div class=\"control\">\n              <input type=\"password\" class=\"input\" v-model=\"password2\" />\n            </div>\n          </div>\n\n          <div class=\"notification is-danger\" v-if=\"errors.length\">\n            <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n          </div>\n\n          <div class=\"field\">\n            <div class=\"control\">\n              <button class=\"button is-dark\">Sign up</button>\n            </div>\n          </div>\n\n          <hr />\n\n          Or <router-link to=\"/log-in\">click here</router-link> to log in!\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { toast } from \"bulma-toast\";\n\nexport default {\n  name: \"SignUp\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      password2: \"\",\n      errors: [],\n    };\n  },\n  methods: {\n    submitForm() {\n      this.errors = [];\n\n      if (this.username === \"\") {\n        this.errors.push(\"The username is missing\");\n      }\n\n      if (this.password === \"\") {\n        this.errors.push(\"The password is too short\");\n      }\n\n      if (this.password !== this.password2) {\n        this.errors.push(\"The passwords doesn't match\");\n      }\n      this.checkPasswordStrength();\n\n      if (!this.errors.length) {\n        const formData = {\n          username: this.username,\n          password: this.password,\n        };\n\n        axios\n          .post(\"/api/v1/users/\", formData)\n          .then((response) => {\n            toast({\n              message: \"Account created, please log in!\",\n              type: \"is-success\",\n              dismissible: true,\n              pauseOnHover: true,\n              duration: 2000,\n              position: \"bottom-right\",\n            });\n\n            this.$router.push(\"/log-in\");\n          })\n          .catch((error) => {\n            if (error.response) {\n              for (const property in error.response.data) {\n                this.errors.push(\n                  `${property}: ${error.response.data[property]}`\n                );\n              }\n\n              console.log(JSON.stringify(error.response.data));\n            } else if (error.message) {\n              this.errors.push(\"Something went wrong. Please try again\");\n\n              console.log(JSON.stringify(error));\n            }\n          });\n      }\n    },\n    checkPasswordStrength() {\n      this.errors = [];\n\n      // Пассворд 6-с дээш тэмдэгт агуулсан эсэх\n      if (this.password.length < 6) {\n        this.errors.push(\"Пассворд дор хаяж нэг том үсэг, нэг жижиг үсэг, нэг тусгай тэмдэгт, нэг тоо орсон байх ба 6-с дээш тэмдэгт агуулсан байх ёстой\");\n      } elif(!/[A-Z]/.test(this.password)) {\n        this.errors.push(\"Пассворд дор хаяж нэг том үсэг, нэг жижиг үсэг, нэг тусгай тэмдэгт, нэг тоо орсон байх ба 6-с дээш тэмдэгт агуулсан байх ёстой\");\n      } elif(!/[a-z]/.test(this.password)) {\n        this.errors.push(\"Пассворд дор хаяж нэг том үсэг, нэг жижиг үсэг, нэг тусгай тэмдэгт, нэг тоо орсон байх ба 6-с дээш тэмдэгт агуулсан байх ёстой\");\n      } elif(!/[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(this.password)) {\n        this.errors.push(\"Пассворд дор хаяж нэг том үсэг, нэг жижиг үсэг, нэг тусгай тэмдэгт, нэг тоо орсон байх ба 6-с дээш тэмдэгт агуулсан байх ёстой\");\n      } elif(!/\\d/.test(this.password)) {\n        this.errors.push(\"Пассворд дор хаяж нэг том үсэг, нэг жижиг үсэг, нэг тусгай тэмдэгт, нэг тоо орсон байх ба 6-с дээш тэмдэгт агуулсан байх ёстой\");\n      }\n    },\n\n    checkPasswordStrength() {\n      this.errors = [];\n\n      // Check if all conditions are met\n      if (\n        this.password.length < 6 ||\n        !/[A-Z]/.test(this.password) ||\n        !/[a-z]/.test(this.password) ||\n        !/[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(this.password) ||\n        !/\\d/.test(this.password)\n      ) {\n        this.errors.push(\"Пассворд дор хаяж нэг том үсэг, нэг жижиг үсэг, нэг тусгай тэмдэгт, нэг тоо орсон байх ба 6-с дээш тэмдэгт агуулсан байх ёстой\");\n      },\n    };\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}