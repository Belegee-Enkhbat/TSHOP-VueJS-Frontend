{"ast":null,"code":"import _regeneratorRuntime from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport axios from \"axios\";\nimport { toast } from \"bulma-toast\";\nimport ProductBox from \"@/components/ProductBox.vue\";\nexport default {\n  name: \"Category\",\n  components: {\n    ProductBox: ProductBox\n  },\n  data: function data() {\n    return {\n      category: {\n        products: []\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getCategory();\n  },\n  watch: {\n    // need to normally update category.name after click\n    $route: function $route(to, from) {\n      if (to.name === \"Category\") {\n        this.getCategory();\n      }\n    }\n  },\n  methods: {\n    getCategory: function getCategory() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var categorySlug, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              categorySlug = _this.$route.params.category_slug;\n              _this.$store.commit(\"setIsLoading\", true);\n              _context.prev = 2;\n              if (!(categorySlug === 'product')) {\n                _context.next = 11;\n                break;\n              }\n              console.log('yes');\n              _context.next = 7;\n              return axios.get(\"/api/v1/latest-products/\");\n            case 7:\n              response = _context.sent;\n              console.log(response);\n              _context.next = 15;\n              break;\n            case 11:\n              _context.next = 13;\n              return axios.get(\"/api/v1/products/\".concat(categorySlug, \"/\"));\n            case 13:\n              response = _context.sent;\n              console.log(response);\n            case 15:\n              _this.category = response.data;\n              document.title = _this.category.name + \" | Glee\";\n              _context.next = 23;\n              break;\n            case 19:\n              _context.prev = 19;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0);\n              toast({\n                message: \"Something went wrong. Please try again.\",\n                type: \"is-danger\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"bottom-right\"\n              });\n            case 23:\n              _context.prev = 23;\n              _this.$store.commit(\"setIsLoading\", false);\n              return _context.finish(23);\n            case 26:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 19, 23, 26]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","toast","ProductBox","name","components","data","category","products","mounted","getCategory","watch","$route","to","from","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","categorySlug","response","wrap","_callee$","_context","prev","next","params","category_slug","$store","commit","console","log","get","sent","concat","document","title","t0","message","type","dismissible","pauseOnHover","duration","position","finish","stop"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/Category.vue"],"sourcesContent":["<template>\n  <div class=\"page-category\">\n    <div class=\"columns is-multiline\">\n      <div class=\"column is-12\">\n        <h2 class=\"is-size-2 has-text-centered\">{{ category.name }}</h2>\n      </div>\n\n      <ProductBox v-for=\"product in category.products\" v-bind:key=\"product.id\" v-bind:product=\"product\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { toast } from \"bulma-toast\";\n\nimport ProductBox from \"@/components/ProductBox.vue\";\n\nexport default {\n  name: \"Category\",\n  components: {\n    ProductBox,\n  },\n  data() {\n    return {\n      category: {\n        products: [],\n      },\n    };\n  },\n  mounted() {\n    this.getCategory();\n  },\n  watch: {\n    // need to normally update category.name after click\n    $route(to, from) {\n      if (to.name === \"Category\") {\n        this.getCategory();\n      }\n    },\n  },\n  methods: {\n    async getCategory() {\n      const categorySlug = this.$route.params.category_slug;\n      this.$store.commit(\"setIsLoading\", true);\n\n      try {\n        let response;\n        if (categorySlug === 'product') {\n          console.log('yes');\n          response = await axios.get(`/api/v1/latest-products/`);\n          console.log(response)\n        } else {\n          response = await axios.get(`/api/v1/products/${categorySlug}/`);\n          console.log(response)\n        }\n\n        this.category = response.data;\n        document.title = this.category.name + \" | Glee\";\n      } catch (error) {\n        console.log(error);\n        toast({\n          message: \"Something went wrong. Please try again.\",\n          type: \"is-danger\",\n          dismissible: true,\n          pauseOnHover: true,\n          duration: 2000,\n          position: \"bottom-right\",\n        });\n      } finally {\n        this.$store.commit(\"setIsLoading\", false);\n      }\n    }\n\n  },\n};\n</script>\n"],"mappings":";;;AAaA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,KAAI,QAAS,aAAa;AAEnC,OAAOC,UAAS,MAAO,6BAA6B;AAEpD,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVF,UAAU,EAAVA;EACF,CAAC;EACDG,IAAI,WAAAA,KAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE;QACRC,QAAQ,EAAE;MACZ;IACF,CAAC;EACH,CAAC;EACDC,OAAO,WAAAA,QAAA,EAAG;IACR,IAAI,CAACC,WAAW,CAAC,CAAC;EACpB,CAAC;EACDC,KAAK,EAAE;IACL;IACAC,MAAM,WAAAA,OAACC,EAAE,EAAEC,IAAI,EAAE;MACf,IAAID,EAAE,CAACT,IAAG,KAAM,UAAU,EAAE;QAC1B,IAAI,CAACM,WAAW,CAAC,CAAC;MACpB;IACF;EACF,CAAC;EACDK,OAAO,EAAE;IACDL,WAAW,WAAAA,YAAA,EAAG;MAAA,IAAAM,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,YAAA,EAAAC,QAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACZN,YAAW,GAAIL,KAAI,CAACJ,MAAM,CAACgB,MAAM,CAACC,aAAa;cACrDb,KAAI,CAACc,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC;cAAAN,QAAA,CAAAC,IAAA;cAAA,MAIlCL,YAAW,KAAM,SAAS;gBAAAI,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAC5BK,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;cAAAR,QAAA,CAAAE,IAAA;cAAA,OACD1B,KAAK,CAACiC,GAAG,2BAA2B,CAAC;YAAA;cAAtDZ,QAAO,GAAAG,QAAA,CAAAU,IAAA;cACPH,OAAO,CAACC,GAAG,CAACX,QAAQ;cAAAG,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OAEH1B,KAAK,CAACiC,GAAG,qBAAAE,MAAA,CAAqBf,YAAY,MAAG,CAAC;YAAA;cAA/DC,QAAO,GAAAG,QAAA,CAAAU,IAAA;cACPH,OAAO,CAACC,GAAG,CAACX,QAAQ;YAAA;cAGtBN,KAAI,CAACT,QAAO,GAAIe,QAAQ,CAAChB,IAAI;cAC7B+B,QAAQ,CAACC,KAAI,GAAItB,KAAI,CAACT,QAAQ,CAACH,IAAG,GAAI,SAAS;cAAAqB,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAc,EAAA,GAAAd,QAAA;cAE/CO,OAAO,CAACC,GAAG,CAAAR,QAAA,CAAAc,EAAM,CAAC;cAClBrC,KAAK,CAAC;gBACJsC,OAAO,EAAE,yCAAyC;gBAClDC,IAAI,EAAE,WAAW;gBACjBC,WAAW,EAAE,IAAI;gBACjBC,YAAY,EAAE,IAAI;gBAClBC,QAAQ,EAAE,IAAI;gBACdC,QAAQ,EAAE;cACZ,CAAC,CAAC;YAAA;cAAApB,QAAA,CAAAC,IAAA;cAEFV,KAAI,CAACc,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,KAAK,CAAC;cAAA,OAAAN,QAAA,CAAAqB,MAAA;YAAA;YAAA;cAAA,OAAArB,QAAA,CAAAsB,IAAA;UAAA;QAAA,GAAA3B,OAAA;MAAA;IAE7C;EAEF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}