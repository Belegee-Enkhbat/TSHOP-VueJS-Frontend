{"ast":null,"code":"import _regeneratorRuntime from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.timers.js\";\nimport axios from 'axios';\nimport OrderSummary from '@/components/OrderSummary.vue';\nexport default {\n  name: 'MyAccount',\n  components: {\n    OrderSummary: OrderSummary\n  },\n  data: function data() {\n    return {\n      orders: []\n    };\n  },\n  mounted: function mounted() {\n    document.title = 'My account | Glee';\n    this.getMyOrders();\n  },\n  methods: {\n    logout: function logout() {\n      axios.defaults.headers.common[\"Authorization\"] = \"\";\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"username\");\n      localStorage.removeItem(\"userid\");\n      localStorage.removeItem(\"user\");\n      this.$store.commit('removeToken');\n      var toPath = this.$route.query.to || '/';\n      this.$router.push(toPath);\n      setTimeout(function () {\n        window.location.reload();\n      }, 100);\n    },\n    getMyOrders: function getMyOrders() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this.$store.commit('setIsLoading', true);\n              _context.next = 3;\n              return axios.get('/api/v1/orders/').then(function (response) {\n                _this.orders = response.data;\n              })[\"catch\"](function (error) {\n                console.log(error);\n              });\n            case 3:\n              _this.$store.commit('setIsLoading', false);\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","OrderSummary","name","components","data","orders","mounted","document","title","getMyOrders","methods","logout","defaults","headers","common","localStorage","removeItem","$store","commit","toPath","$route","query","to","$router","push","setTimeout","window","location","reload","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","then","response","error","console","log","stop"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/MyAccount.vue"],"sourcesContent":["<template>\n    <div class=\"page-my-account\">\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h1 class=\"title\">My account</h1>\n            </div>\n\n            <div class=\"column is-12\">\n                <button @click=\"logout()\" class=\"button is-danger\">Log out</button>\n            </div>\n\n            <hr>\n\n            <div class=\"column is-12\">\n                <h2 class=\"subtitle\">My orders</h2>\n                <OrderSummary\n                    v-for=\"order in orders\"\n                    v-bind:key=\"order.id\"\n                    v-bind:order=\"order\" />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nimport OrderSummary from '@/components/OrderSummary.vue'\n\nexport default {\n    name: 'MyAccount',\n    components: {\n        OrderSummary\n    },\n    data() {\n        return {\n            orders: []\n        }\n    },\n    mounted() {\n        document.title = 'My account | Glee'\n\n        this.getMyOrders()\n    },\n    methods: {\n        logout() {\n            axios.defaults.headers.common[\"Authorization\"] = \"\"\n\n            localStorage.removeItem(\"token\")\n            localStorage.removeItem(\"username\")\n            localStorage.removeItem(\"userid\")\n            localStorage.removeItem(\"user\")\n\n\n\n            this.$store.commit('removeToken')\n\n          const toPath = this.$route.query.to || '/'\n          this.$router.push(toPath)\n          setTimeout(() => {\n            window.location.reload()\n          }, 100)\n        },\n        async getMyOrders() {\n            this.$store.commit('setIsLoading', true)\n\n            await axios\n                .get('/api/v1/orders/')\n                .then(response => {\n                    this.orders = response.data\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n\n            this.$store.commit('setIsLoading', false)\n        }\n    }\n}\n</script>"],"mappings":";;;;AAyBA,OAAOA,KAAI,MAAO,OAAM;AAExB,OAAOC,YAAW,MAAO,+BAA8B;AAEvD,eAAe;EACXC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IACRF,YAAW,EAAXA;EACJ,CAAC;EACDG,IAAI,WAAAA,KAAA,EAAG;IACH,OAAO;MACHC,MAAM,EAAE;IACZ;EACJ,CAAC;EACDC,OAAO,WAAAA,QAAA,EAAG;IACNC,QAAQ,CAACC,KAAI,GAAI,mBAAkB;IAEnC,IAAI,CAACC,WAAW,CAAC;EACrB,CAAC;EACDC,OAAO,EAAE;IACLC,MAAM,WAAAA,OAAA,EAAG;MACLX,KAAK,CAACY,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,EAAC;MAElDC,YAAY,CAACC,UAAU,CAAC,OAAO;MAC/BD,YAAY,CAACC,UAAU,CAAC,UAAU;MAClCD,YAAY,CAACC,UAAU,CAAC,QAAQ;MAChCD,YAAY,CAACC,UAAU,CAAC,MAAM;MAI9B,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,aAAa;MAElC,IAAMC,MAAK,GAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,EAAC,IAAK,GAAE;MACzC,IAAI,CAACC,OAAO,CAACC,IAAI,CAACL,MAAM;MACxBM,UAAU,CAAC,YAAM;QACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;MACzB,CAAC,EAAE,GAAG;IACR,CAAC;IACKnB,WAAW,WAAAA,YAAA,EAAG;MAAA,IAAAoB,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAChBT,KAAI,CAACZ,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,IAAI;cAAAkB,QAAA,CAAAE,IAAA;cAAA,OAEjCtC,KAAI,CACLuC,GAAG,CAAC,iBAAiB,EACrBC,IAAI,CAAC,UAAAC,QAAO,EAAK;gBACdZ,KAAI,CAACxB,MAAK,GAAIoC,QAAQ,CAACrC,IAAG;cAC9B,CAAC,UACK,CAAC,UAAAsC,KAAI,EAAK;gBACZC,OAAO,CAACC,GAAG,CAACF,KAAK;cACrB,CAAC;YAAA;cAELb,KAAI,CAACZ,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,KAAK;YAAA;YAAA;cAAA,OAAAkB,QAAA,CAAAS,IAAA;UAAA;QAAA,GAAAZ,OAAA;MAAA;IAC5C;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}