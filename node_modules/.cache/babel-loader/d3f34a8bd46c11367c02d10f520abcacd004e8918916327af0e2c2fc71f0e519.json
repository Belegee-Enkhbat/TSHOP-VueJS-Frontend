{"ast":null,"code":"import _regeneratorRuntime from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nexport default {\n  __name: 'ManageProduct',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var postData = ref({\n      name: \"\",\n      slug: \"\",\n      description: \"\",\n      price: 0.0,\n      category_id: 1,\n      // Default or dynamic category ID\n      image: \"uploads/gettyimages-999362376-612x612.jpg\",\n      thumbnail: \"\"\n    });\n    var handleFileUpload = function handleFileUpload(key, event) {\n      if (event.target.files && event.target.files.length > 0) {\n        postData[key] = event.target.files[0]; // Assign the file to the postData[key]\n        console.log(\"file selected.\", postData.thumbnail);\n      } else {\n        console.log(\"No file selected.\");\n      }\n    };\n    var submitPost = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var formData, csrfToken, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              formData = new FormData();\n              formData.append('name', postData.value.name);\n              formData.append('slug', postData.value.slug);\n              formData.append('description', postData.value.description);\n              formData.append('price', postData.value.price);\n              formData.append('category_id', postData.value.category_id);\n              formData.append('image', postData.value.image);\n              formData.append('thumbnail', postData.value.thumbnail); // Append thumbnail file\n              console.log(\"file selected2.\", formData.thumbnail);\n              csrfToken = getCookie(\"csrftoken\");\n              _context.next = 13;\n              return axios.post(\"/api/v1/products/create_product\", formData, {\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"X-CSRFToken\": csrfToken\n                }\n              });\n            case 13:\n              response = _context.sent;\n              console.log(\"Response status:\", response.status);\n              if (response.status === 201) {\n                // Assuming 201 means successful creation\n                console.log(\"Post created successfully:\", response.data);\n                postData.value.name = \"\";\n                postData.value.slug = \"\";\n                postData.value.description = \"\";\n                postData.value.price = 0.0;\n                postData.value.image = \"uploads/gettyimages-999362376-612x612.jpg\";\n                postData.value.thumbnail = \"/uploads/uploads/gettyimages-999362376-612x612.jpg\";\n                window.alert(\"Бүтээгдэхүүн амжилттай үүслээ\");\n              } else {\n                console.error(\"Failed to create post:\", response.status, response.data);\n              }\n              _context.next = 21;\n              break;\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(\"Error creating post:\", _context.t0);\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 18]]);\n      }));\n      return function submitPost() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // Utility to fetch CSRF token\n    function getCookie(name) {\n      var cookieValue = null;\n      if (document.cookie && document.cookie !== \"\") {\n        var cookies = document.cookie.split(\";\");\n        for (var i = 0; i < cookies.length; i++) {\n          var cookie = cookies[i].trim();\n          if (cookie.substring(0, name.length + 1) === name + \"=\") {\n            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n            break;\n          }\n        }\n      }\n      return cookieValue;\n    }\n    var __returned__ = {\n      postData: postData,\n      handleFileUpload: handleFileUpload,\n      submitPost: submitPost,\n      getCookie: getCookie,\n      ref: ref,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","postData","name","slug","description","price","category_id","image","thumbnail","handleFileUpload","key","event","target","files","length","console","log","submitPost","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","csrfToken","response","wrap","_callee$","_context","prev","next","FormData","append","value","getCookie","post","headers","sent","status","data","window","alert","error","t0","stop","apply","arguments","cookieValue","document","cookie","cookies","split","i","trim","substring","decodeURIComponent"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/ManageProduct.vue"],"sourcesContent":["<template>\n  <div class=\"form-container\">\n    <h1>Create New Product</h1>\n    <form @submit.prevent=\"submitPost\">\n      <div>\n        <label for=\"name\">Name:</label>\n        <input type=\"text\" id=\"name\" v-model=\"postData.name\" required />\n      </div>\n      <div>\n        <label for=\"slug\">Slug:</label>\n        <input type=\"text\" id=\"slug\" v-model=\"postData.slug\" required />\n      </div>\n      <div>\n        <label for=\"description\">Description:</label>\n        <textarea\n          id=\"description\"\n          v-model=\"postData.description\"\n          required\n        ></textarea>\n      </div>\n      <div>\n        <label for=\"price\">Price:</label>\n        <input\n          type=\"number\"\n          id=\"price\"\n          v-model.number=\"postData.price\"\n          required\n          min=\"0\"\n        />\n      </div>\n      <div>\n        <label for=\"image\">Image:</label>\n        <input\n          type=\"file\"\n          id=\"image\"\n          @change=\"handleFileUpload('image', $event)\"\n        />\n      </div>\n      <div>\n        <label for=\"thumbnail\">Thumbnail:</label>\n        <input\n          type=\"file\"\n          id=\"thumbnail\"\n          @change=\"handleFileUpload('thumbnail', $event)\"\n        />\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\n\nconst postData = ref({\n  name: \"\",\n  slug: \"\",\n  description: \"\",\n  price: 0.0,\n  category_id: 1, // Default or dynamic category ID\n  image: \"uploads/gettyimages-999362376-612x612.jpg\",\n  thumbnail: \"\",\n});\n\nconst handleFileUpload = (key, event) => {\n  if (event.target.files && event.target.files.length > 0) {\n    postData[key] = event.target.files[0]; // Assign the file to the postData[key]\n    console.log(\"file selected.\", postData.thumbnail);\n\n  }else{\n    console.log(\"No file selected.\");\n  }};\n\nconst submitPost = async () => {\n  try {\n    const formData = new FormData();\n    formData.append('name', postData.value.name);\n    formData.append('slug', postData.value.slug);\n    formData.append('description', postData.value.description);\n    formData.append('price', postData.value.price);\n    formData.append('category_id', postData.value.category_id);\n    formData.append('image', postData.value.image);\n    formData.append('thumbnail', postData.value.thumbnail); // Append thumbnail file\n    console.log(\"file selected2.\", formData.thumbnail);\n\n    const csrfToken = getCookie(\"csrftoken\");\n    const response = await axios.post(\n      \"/api/v1/products/create_product\",\n      formData,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": csrfToken,\n        },\n      }\n    );\n    console.log(\"Response status:\", response.status);\n    if (response.status === 201) {\n      // Assuming 201 means successful creation\n      console.log(\"Post created successfully:\", response.data);\n      postData.value.name = \"\";\n      postData.value.slug = \"\";\n      postData.value.description = \"\";\n      postData.value.price = 0.0;\n      postData.value.image = \"uploads/gettyimages-999362376-612x612.jpg\";\n      postData.value.thumbnail =\n        \"/uploads/uploads/gettyimages-999362376-612x612.jpg\";\n      window.alert(\"Бүтээгдэхүүн амжилттай үүслээ\");\n    } else {\n      console.error(\"Failed to create post:\", response.status, response.data);\n    }\n  } catch (error) {\n    console.error(\"Error creating post:\", error);\n  }\n};\n\n// Utility to fetch CSRF token\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== \"\") {\n    const cookies = document.cookie.split(\";\");\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === name + \"=\") {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n</script>\n\n<style scoped lang=\"scss\">\n.form-container {\n  max-width: 400px;\n  margin: 0 auto;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  background-color: #f9f9f9;\n}\n\n.form-container label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\n.form-container input[type=\"text\"],\n.form-container input[type=\"number\"],\n.form-container input[type=\"file\"],\n.form-container textarea {\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  box-sizing: border-box;\n}\n\n.form-container button {\n  padding: 8px 12px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.form-container button:hover {\n  background-color: #0056b3;\n}\n</style>\n"],"mappings":";;;;;;;AAoDA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;;;;;;IAEzB,IAAMC,QAAQ,GAAGF,GAAG,CAAC;MACnBG,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,EAAE;MACfC,KAAK,EAAE,GAAG;MACVC,WAAW,EAAE,CAAC;MAAE;MAChBC,KAAK,EAAE,2CAA2C;MAClDC,SAAS,EAAE;IACb,CAAC,CAAC;IAEF,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,GAAG,EAAEC,KAAK,EAAK;MACvC,IAAIA,KAAK,CAACC,MAAM,CAACC,KAAK,IAAIF,KAAK,CAACC,MAAM,CAACC,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;QACvDb,QAAQ,CAACS,GAAG,CAAC,GAAGC,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACvCE,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEf,QAAQ,CAACO,SAAS,CAAC;MAEnD,CAAC,MAAI;QACHO,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MAClC;IAAC,CAAC;IAEJ,IAAMC,UAAU;MAAA,IAAAC,KAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA;QAAA,IAAAC,QAAA,EAAAC,SAAA,EAAAC,QAAA;QAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAETN,QAAQ,GAAG,IAAIQ,QAAQ,CAAC,CAAC;cAC/BR,QAAQ,CAACS,MAAM,CAAC,MAAM,EAAE/B,QAAQ,CAACgC,KAAK,CAAC/B,IAAI,CAAC;cAC5CqB,QAAQ,CAACS,MAAM,CAAC,MAAM,EAAE/B,QAAQ,CAACgC,KAAK,CAAC9B,IAAI,CAAC;cAC5CoB,QAAQ,CAACS,MAAM,CAAC,aAAa,EAAE/B,QAAQ,CAACgC,KAAK,CAAC7B,WAAW,CAAC;cAC1DmB,QAAQ,CAACS,MAAM,CAAC,OAAO,EAAE/B,QAAQ,CAACgC,KAAK,CAAC5B,KAAK,CAAC;cAC9CkB,QAAQ,CAACS,MAAM,CAAC,aAAa,EAAE/B,QAAQ,CAACgC,KAAK,CAAC3B,WAAW,CAAC;cAC1DiB,QAAQ,CAACS,MAAM,CAAC,OAAO,EAAE/B,QAAQ,CAACgC,KAAK,CAAC1B,KAAK,CAAC;cAC9CgB,QAAQ,CAACS,MAAM,CAAC,WAAW,EAAE/B,QAAQ,CAACgC,KAAK,CAACzB,SAAS,CAAC,CAAC,CAAC;cACxDO,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEO,QAAQ,CAACf,SAAS,CAAC;cAE5CgB,SAAS,GAAGU,SAAS,CAAC,WAAW,CAAC;cAAAN,QAAA,CAAAE,IAAA;cAAA,OACjB9B,KAAK,CAACmC,IAAI,CAC/B,iCAAiC,EACjCZ,QAAQ,EACR;gBACEa,OAAO,EAAE;kBACP,cAAc,EAAE,kBAAkB;kBAClC,aAAa,EAAEZ;gBACjB;cACF,CACF,CAAC;YAAA;cATKC,QAAQ,GAAAG,QAAA,CAAAS,IAAA;cAUdtB,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAES,QAAQ,CAACa,MAAM,CAAC;cAChD,IAAIb,QAAQ,CAACa,MAAM,KAAK,GAAG,EAAE;gBAC3B;gBACAvB,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAES,QAAQ,CAACc,IAAI,CAAC;gBACxDtC,QAAQ,CAACgC,KAAK,CAAC/B,IAAI,GAAG,EAAE;gBACxBD,QAAQ,CAACgC,KAAK,CAAC9B,IAAI,GAAG,EAAE;gBACxBF,QAAQ,CAACgC,KAAK,CAAC7B,WAAW,GAAG,EAAE;gBAC/BH,QAAQ,CAACgC,KAAK,CAAC5B,KAAK,GAAG,GAAG;gBAC1BJ,QAAQ,CAACgC,KAAK,CAAC1B,KAAK,GAAG,2CAA2C;gBAClEN,QAAQ,CAACgC,KAAK,CAACzB,SAAS,GACtB,oDAAoD;gBACtDgC,MAAM,CAACC,KAAK,CAAC,+BAA+B,CAAC;cAC/C,CAAC,MAAM;gBACL1B,OAAO,CAAC2B,KAAK,CAAC,wBAAwB,EAAEjB,QAAQ,CAACa,MAAM,EAAEb,QAAQ,CAACc,IAAI,CAAC;cACzE;cAACX,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAe,EAAA,GAAAf,QAAA;cAEDb,OAAO,CAAC2B,KAAK,CAAC,sBAAsB,EAAAd,QAAA,CAAAe,EAAO,CAAC;YAAC;YAAA;cAAA,OAAAf,QAAA,CAAAgB,IAAA;UAAA;QAAA,GAAAtB,OAAA;MAAA,CAEhD;MAAA,gBAzCKL,UAAUA,CAAA;QAAA,OAAAC,KAAA,CAAA2B,KAAA,OAAAC,SAAA;MAAA;IAAA,GAyCf;;IAED;IACA,SAASZ,SAASA,CAAChC,IAAI,EAAE;MACvB,IAAI6C,WAAW,GAAG,IAAI;MACtB,IAAIC,QAAQ,CAACC,MAAM,IAAID,QAAQ,CAACC,MAAM,KAAK,EAAE,EAAE;QAC7C,IAAMC,OAAO,GAAGF,QAAQ,CAACC,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC;QAC1C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,OAAO,CAACpC,MAAM,EAAEsC,CAAC,EAAE,EAAE;UACvC,IAAMH,MAAM,GAAGC,OAAO,CAACE,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;UAChC,IAAIJ,MAAM,CAACK,SAAS,CAAC,CAAC,EAAEpD,IAAI,CAACY,MAAM,GAAG,CAAC,CAAC,KAAKZ,IAAI,GAAG,GAAG,EAAE;YACvD6C,WAAW,GAAGQ,kBAAkB,CAACN,MAAM,CAACK,SAAS,CAACpD,IAAI,CAACY,MAAM,GAAG,CAAC,CAAC,CAAC;YACnE;UACF;QACF;MACF;MACA,OAAOiC,WAAW;IACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}