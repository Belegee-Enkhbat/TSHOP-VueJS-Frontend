{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nvar _hoisted_1 = /*#__PURE__*/_createElementVNode(\"head\", null, [/*#__PURE__*/_createElementVNode(\"meta\", {\n  charset: \"UTF-8\"\n}), /*#__PURE__*/_createElementVNode(\"meta\", {\n  \"http-equiv\": \"X-UA-Compatible\",\n  content: \"IE=edge\"\n}), /*#__PURE__*/_createElementVNode(\"meta\", {\n  name: \"viewport\",\n  content: \"width=device-width, initial-scale=1.0\"\n}), /*#__PURE__*/_createElementVNode(\"title\", null, \"Glee\"), /*#__PURE__*/_createElementVNode(\"link\", {\n  rel: \"stylesheet\",\n  href: \"../assets/css/style.min.css\"\n})], -1 /* HOISTED */);\nvar _hoisted_2 = {\n  \"class\": \"page-log-in\"\n};\nvar _hoisted_3 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"page-name\\\"><div class=\\\"page-name__inner\\\"><div class=\\\"container\\\"><h2 class=\\\"title\\\">Нэвтрэх</h2><div class=\\\"breadcrumbs\\\"></div></div></div></div>\", 1);\nvar _hoisted_4 = {\n  \"class\": \"columns\"\n};\nvar _hoisted_5 = {\n  \"class\": \"column is-4 is-offset-4\"\n};\nvar _hoisted_6 = {\n  \"class\": \"field\"\n};\nvar _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Username\", -1 /* HOISTED */);\nvar _hoisted_8 = {\n  \"class\": \"control\"\n};\nvar _hoisted_9 = {\n  \"class\": \"field\"\n};\nvar _hoisted_10 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Password\", -1 /* HOISTED */);\nvar _hoisted_11 = {\n  \"class\": \"control\"\n};\nvar _hoisted_12 = {\n  key: 0,\n  \"class\": \"notification is-danger\"\n};\nvar _hoisted_13 = /*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"field\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"control\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  \"class\": \"modal__btn-login\",\n  id: \"login\"\n}, \"Log in\")])], -1 /* HOISTED */);\nvar _hoisted_14 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nvar _hoisted_15 = /*#__PURE__*/_createStaticVNode(\"<main class=\\\"main\\\"><section class=\\\"modal\\\"><div class=\\\"container\\\"><form class=\\\"modal__form\\\" action=\\\"#\\\"><label class=\\\"modal__label\\\"> Username or email address * <input class=\\\"modal__input\\\" type=\\\"text\\\" required></label><label class=\\\"modal__label\\\"> Password * <input class=\\\"modal__input\\\" type=\\\"password\\\" required></label><button class=\\\"modal__btn-login\\\" type=\\\"submit\\\">Login</button><div class=\\\"modal__lost\\\"><label><input type=\\\"checkbox\\\"> Remember me </label><a class=\\\"modal__lost-password\\\" href=\\\"#\\\"> Lost your password? </a></div></form><p class=\\\"modal__register-question\\\" href=\\\"#\\\"> Not registered? No problem </p><a class=\\\"modal__create-acclink\\\" href=\\\"#\\\"> Create an account </a></div></section></main>\", 1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"form\", {\n    \"class\": \"modal__form\",\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers(function () {\n      return $options.submitForm && $options.submitForm.apply($options, arguments);\n    }, [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"class\": \"input\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.username = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.username]])])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"class\": \"input\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.password = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]])])]), $data.errors.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.errors, function (error) {\n    return _openBlock(), _createElementBlock(\"p\", {\n      key: error\n    }, _toDisplayString(error), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _hoisted_13, _hoisted_14, _createTextVNode(\" Or \"), _createVNode(_component_router_link, {\n    to: \"/sign-up\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createTextVNode(\"click here\")];\n    }),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" to sign up! \")], 32 /* NEED_HYDRATION */)])])]), _hoisted_15], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","charset","content","name","rel","href","_createStaticVNode","key","id","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","onSubmit","_cache","_withModifiers","$options","submitForm","apply","arguments","_hoisted_6","_hoisted_7","_hoisted_8","type","$event","$data","username","_hoisted_9","_hoisted_10","_hoisted_11","password","errors","length","_hoisted_12","_renderList","error","_toDisplayString","_createCommentVNode","_hoisted_13","_hoisted_14","_createTextVNode","_createVNode","_component_router_link","to","_withCtx","_","_hoisted_15"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/LogIn.vue"],"sourcesContent":["<template>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Glee</title>\n    <link rel=\"stylesheet\" href=\"../assets/css/style.min.css\" />\n  </head>\n  <div class=\"page-log-in\">\n    <div class=\"page-name\">\n      <div class=\"page-name__inner\">\n        <div class=\"container\">\n          <h2 class=\"title\">Нэвтрэх</h2>\n          <div class=\"breadcrumbs\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"columns\">\n      <div class=\"column is-4 is-offset-4\">\n        <form class=\"modal__form\" @submit.prevent=\"submitForm\">\n          <div class=\"field\">\n            <label>Username</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" id=\"username\" v-model=\"username\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>Password</label>\n            <div class=\"control\">\n              <input type=\"password\" class=\"input\" id=\"password\" v-model=\"password\" />\n            </div>\n          </div>\n\n          <div class=\"notification is-danger\" v-if=\"errors.length\">\n            <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n          </div>\n\n          <div class=\"field\">\n            <div class=\"control\">\n              <button class=\"modal__btn-login\" id=\"login\">Log in</button>\n            </div>\n          </div>\n\n          <hr />\n\n          Or <router-link to=\"/sign-up\">click here</router-link> to sign up!\n        </form>\n      </div>\n    </div>\n  </div>\n\n  <main class=\"main\">\n    <section class=\"modal\">\n      <div class=\"container\">\n        <form class=\"modal__form\" action=\"#\">\n          <label class=\"modal__label\">\n            Username or email address *\n            <input class=\"modal__input\" type=\"text\" required />\n          </label>\n          <label class=\"modal__label\">\n            Password *\n            <input class=\"modal__input\" type=\"password\" required />\n          </label>\n          <button class=\"modal__btn-login\" type=\"submit\">Login</button>\n          <div class=\"modal__lost\">\n            <label>\n              <input type=\"checkbox\" />\n              Remember me\n            </label>\n            <a class=\"modal__lost-password\" href=\"#\"> Lost your password? </a>\n          </div>\n        </form>\n        <p class=\"modal__register-question\" href=\"#\">\n          Not registered? No problem\n        </p>\n        <a class=\"modal__create-acclink\" href=\"#\"> Create an account </a>\n      </div>\n    </section>\n  </main>\n</template>\n\n<script>\nrequire(\"@/assets/css/style.min.css\");\nimport axios from \"axios\";\n\nexport default {\n  name: \"LogIn\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      errors: [],\n    };\n  },\n  mounted() {\n    document.title = \"Log In \";\n  },\n  methods: {\n    async submitForm() {\n      axios.defaults.headers.common[\"Authorization\"] = \"\";\n\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n\n      const formData = {\n        username: this.username,\n        password: this.password,\n      };\n\n      await axios\n        .post(\"/api/v1/token/login/\", formData)\n        .then((response) => {\n          const token = response.data.auth_token;\n\n          this.$store.commit(\"setToken\", token);\n          this.$store.commit(\"setUser\", this.username);\n          axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token;\n          localStorage.setItem(\"user\", this.username);\n          localStorage.setItem(\"token\", token);\n\n          const toPath = this.$route.query.to || \"/\";\n          this.$router.push(toPath);\n          setTimeout(() => {\n            window.location.reload();\n          }, 100);\n        })\n        .catch((error) => {\n          if (error.response) {\n            for (const property in error.response.data) {\n              this.errors.push(`${property}: ${error.response.data[property]}`);\n            }\n          } else {\n            this.errors.push(\"Something went wrong. Please try again\");\n\n            console.log(JSON.stringify(error));\n          }\n        });\n    },\n  },\n};\n</script>\n"],"mappings":";8BACEA,mBAAA,CAMO,e,aALLA,mBAAA,CAAwB;EAAlBC,OAAO,EAAC;AAAO,I,aACrBD,mBAAA,CAAuD;EAAjD,YAAU,EAAC,iBAAiB;EAACE,OAAO,EAAC;iBAC3CF,mBAAA,CAAwE;EAAlEG,IAAI,EAAC,UAAU;EAACD,OAAO,EAAC;iBAC9BF,mBAAA,CAAmB,eAAZ,MAAI,G,aACXA,mBAAA,CAA4D;EAAtDI,GAAG,EAAC,YAAY;EAACC,IAAI,EAAC;;;EAEzB,SAAM;AAAa;8BAR1BC,kBAAA;;EAkBS,SAAM;AAAS;;EACb,SAAM;AAAyB;;EAE3B,SAAM;AAAO;8BAChBN,mBAAA,CAAuB,eAAhB,UAAQ;;EACV,SAAM;AAAS;;EAKjB,SAAM;AAAO;+BAChBA,mBAAA,CAAuB,eAAhB,UAAQ;;EACV,SAAM;AAAS;;EA9BhCO,GAAA;EAmCe,SAAM;;+BAIXP,mBAAA,CAIM;EAJD,SAAM;AAAO,I,aAChBA,mBAAA,CAEM;EAFD,SAAM;AAAS,I,aAClBA,mBAAA,CAA2D;EAAnD,SAAM,kBAAkB;EAACQ,EAAE,EAAC;GAAQ,QAAM,E;+BAItDR,mBAAA,CAAM;+BA7ChBM,kBAAA;;;uBAAAG,mBAAA,CAAAC,SAAA,SACEC,UAMO,EACPX,mBAAA,CA2CM,OA3CNY,UA2CM,GA1CJC,UAQM,EACNb,mBAAA,CAgCM,OAhCNc,UAgCM,GA/BJd,mBAAA,CA8BM,OA9BNe,UA8BM,GA7BJf,mBAAA,CA4BO;IA5BD,SAAM,aAAa;IAAEgB,QAAM,EAAAC,MAAA,QAAAA,MAAA,MApBzCC,cAAA;MAAA,OAoBmDC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,CAAAC,KAAA,CAAAF,QAAA,EAAAG,SAAA,CAAU;IAAA;MACnDtB,mBAAA,CAKM,OALNuB,UAKM,GAJJC,UAAuB,EACvBxB,mBAAA,CAEM,OAFNyB,UAEM,G,gBADJzB,mBAAA,CAAoE;IAA7D0B,IAAI,EAAC,MAAM;IAAC,SAAM,OAAO;IAAClB,EAAE,EAAC,UAAU;IAxB5D,uBAAAS,MAAA,QAAAA,MAAA,gBAAAU,MAAA;MAAA,OAwBsEC,KAAA,CAAAC,QAAQ,GAAAF,MAAA;IAAA;iDAARC,KAAA,CAAAC,QAAQ,E,OAIpE7B,mBAAA,CAKM,OALN8B,UAKM,GAJJC,WAAuB,EACvB/B,mBAAA,CAEM,OAFNgC,WAEM,G,gBADJhC,mBAAA,CAAwE;IAAjE0B,IAAI,EAAC,UAAU;IAAC,SAAM,OAAO;IAAClB,EAAE,EAAC,UAAU;IA/BhE,uBAAAS,MAAA,QAAAA,MAAA,gBAAAU,MAAA;MAAA,OA+B0EC,KAAA,CAAAK,QAAQ,GAAAN,MAAA;IAAA;iDAARC,KAAA,CAAAK,QAAQ,E,OAI9BL,KAAA,CAAAM,MAAM,CAACC,MAAM,I,cAAvD1B,mBAAA,CAEM,OAFN2B,WAEM,I,kBADJ3B,mBAAA,CAA6DC,SAAA,QApCzE2B,WAAA,CAoC+BT,KAAA,CAAAM,MAAM,EApCrC,UAoCsBI,KAAK;yBAAf7B,mBAAA,CAA6D;MAA3BF,GAAG,EAAE+B;IAAK,GAAAC,gBAAA,CAAKD,KAAK;sCApClEE,mBAAA,gBAuCUC,WAIM,EAENC,WAAM,EA7ChBC,gBAAA,CA6CgB,MAEH,GAAAC,YAAA,CAAmDC,sBAAA;IAAtCC,EAAE,EAAC;EAAU;IA/CvC,WAAAC,QAAA,CA+CwC;MAAA,OAAU,CA/ClDJ,gBAAA,CA+CwC,YAAU,E;;IA/ClDK,CAAA;MAAAL,gBAAA,CA+CgE,eACxD,E,kCAKNM,WA2BO,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}