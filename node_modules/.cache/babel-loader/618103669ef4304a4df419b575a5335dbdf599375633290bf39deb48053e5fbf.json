{"ast":null,"code":"import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-35171425\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"page-product\"\n};\nvar _hoisted_2 = {\n  \"class\": \"catalog-card2\"\n};\nvar _hoisted_3 = {\n  \"class\": \"catalog-card2__imgbox\"\n};\nvar _hoisted_4 = {\n  \"class\": \"image mb-6\"\n};\nvar _hoisted_5 = [\"src\"];\nvar _hoisted_6 = {\n  \"class\": \"catalog-card2__description\"\n};\nvar _hoisted_7 = {\n  \"class\": \"catalog-card2__title\"\n};\nvar _hoisted_8 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    \"class\": \"catalog-card2__star\",\n    \"data-rateyo-rating\": \"4\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_9 = {\n  \"class\": \"catalog-card2__price\"\n};\nvar _hoisted_10 = {\n  \"class\": \"catalog-card2__text\"\n};\nvar _hoisted_11 = {\n  \"class\": \"field has-addons mt-6\"\n};\nvar _hoisted_12 = {\n  \"class\": \"control\"\n};\nvar _hoisted_13 = {\n  \"class\": \"control\"\n};\nvar _hoisted_14 = {\n  \"class\": \"columns is multiline\"\n};\nvar _hoisted_15 = {\n  \"class\": \"column is-9\"\n};\nvar _hoisted_16 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"h2\", {\n    \"class\": \"title\"\n  }, \"Үнэлгээ:\", -1 /* HOISTED */);\n});\nvar _hoisted_17 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"p\", {\n    \"class\": \"title\"\n  }, \"Үнэлгээний түүх\", -1 /* HOISTED */);\n});\nvar _hoisted_18 = {\n  \"class\": \"review-wrapper__text\"\n};\nvar _hoisted_19 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"label\", {\n    \"for\": \"content\"\n  }, \"Сэтгэгдэл\", -1 /* HOISTED */);\n});\nvar _hoisted_20 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"label\", {\n    \"for\": \"stars\"\n  }, \"Од\", -1 /* HOISTED */);\n});\nvar _hoisted_21 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Илгээх\", -1 /* HOISTED */);\n});\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"figure\", _hoisted_4, [_createElementVNode(\"img\", {\n    src: $data.product.get_thumbnail\n  }, null, 8 /* PROPS */, _hoisted_5)])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h4\", _hoisted_7, _toDisplayString($data.product.name), 1 /* TEXT */), _hoisted_8, _createElementVNode(\"p\", _hoisted_9, \"$\" + _toDisplayString($data.product.price), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, _toDisplayString($data.product.description), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"class\": \"input\",\n    min: \"1\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.quantity = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.quantity]])]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"a\", {\n    \"class\": \"button is-dark\",\n    onClick: _cache[1] || (_cache[1] = function () {\n      return $options.addToCart && $options.addToCart.apply($options, arguments);\n    })\n  }, \"Сагсанд нэмэх\")])])])]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_hoisted_16, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.reviews, function (review) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: review.id,\n      \"class\": \"review-wrapper\"\n    }, [_hoisted_17, _createElementVNode(\"p\", null, \"Хэрэглэгч: \" + _toDisplayString(review.user.username), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Үнэлгээ: \" + _toDisplayString(review.stars), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_18, \"Сэтгэгдэл :\" + _toDisplayString(review.content), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Огноо: \" + _toDisplayString(review.date_added), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"div\", null, [_createElementVNode(\"form\", {\n    \"class\": \"formreview\",\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers(function () {\n      return $options.submitReview && $options.submitReview.apply($options, arguments);\n    }, [\"prevent\"]))\n  }, [_createElementVNode(\"div\", null, [_hoisted_19, _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $data.review.content = $event;\n    }),\n    id: \"content\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.review.content]])]), _createElementVNode(\"div\", null, [_hoisted_20, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return $data.review.stars = $event;\n    }),\n    type: \"number\",\n    id: \"stars\",\n    required: \"\",\n    max: \"5\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.review.stars, void 0, {\n    number: true\n  }]])]), _hoisted_21], 32 /* NEED_HYDRATION */)])])])]);\n}","map":{"version":3,"names":["_createElementVNode","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","src","$data","product","get_thumbnail","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","name","_hoisted_8","_hoisted_9","price","_hoisted_10","description","_hoisted_11","_hoisted_12","min","_cache","$event","quantity","_hoisted_13","onClick","$options","addToCart","apply","arguments","_hoisted_14","_hoisted_15","_hoisted_16","_Fragment","_renderList","reviews","review","key","id","_hoisted_17","user","username","stars","_hoisted_18","content","date_added","onSubmit","_withModifiers","submitReview","_hoisted_19","required","_hoisted_20","max","number","_hoisted_21"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/Product.vue"],"sourcesContent":["<template>\n  <div class=\"page-product\">\n    <div class=\"catalog-card2\">\n      <div class=\"catalog-card2__imgbox\">\n        <figure class=\"image mb-6\">\n          <img v-bind:src=\"product.get_thumbnail\" />\n\n        </figure>\n      </div>\n      <div class=\"catalog-card2__description\">\n        <h4 class=\"catalog-card2__title\">\n          {{ product.name }}\n        </h4>\n        <div class=\"catalog-card2__star\" data-rateyo-rating=\"4\"></div>\n        <p class=\"catalog-card2__price\">${{ product.price }}</p>\n        <p class=\"catalog-card2__text\">\n          {{ product.description }}\n        </p>\n        <div class=\"field has-addons mt-6\">\n          <div class=\"control\">\n            <input type=\"number\" class=\"input\" min=\"1\" v-model=\"quantity\" />\n          </div>\n\n          <div class=\"control\">\n            <a class=\"button is-dark\" @click=\"addToCart\">Сагсанд нэмэх</a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"columns is multiline\">\n      <div class=\"column is-9\">\n        <h2 class=\"title\">Үнэлгээ:</h2>\n        <div v-for=\"review in reviews\" :key=\"review.id\" class=\"review-wrapper\">\n          <p class=\"title\">Үнэлгээний түүх</p>\n          <p>Хэрэглэгч: {{ review.user.username }}</p>\n          <p>Үнэлгээ: {{ review.stars }}</p>\n          <p class=\"review-wrapper__text\">Сэтгэгдэл :{{ review.content }}</p>\n          <p>Огноо: {{ review.date_added }}</p>\n        </div>\n\n        <div>\n          <form  class=\"formreview\" @submit.prevent=\"submitReview\">\n            <div>\n            <label for=\"content\">Сэтгэгдэл</label>\n            <textarea v-model=\"review.content\" id=\"content\" required></textarea>\n            </div>\n            <div>\n            <label for=\"stars\">Од</label>\n            <input\n              v-model.number=\"review.stars\"\n              type=\"number\"\n              id=\"stars\"\n              required\n              max=\"5\"\n            />\n            </div>\n            <button type=\"submit\">Илгээх</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.catalog-card2 {\n  display: flex;\n  justify-content: space-evenly;\n\n  &__description {\n    max-width: 700px;\n  }\n}\n.columns.is-multiline{\n  display: grid;\n  grid-template-columns: 30% 30% 30%;\n}\n.review-wrapper {\n  margin-bottom: 20px;\n  border-bottom: 1px solid #a3bbc8;\n\n  &__text {\n    font-size: 16px;\n    line-height: 30px;\n    color: #2292a5;\n  }\n}\n\n\n\n/* Overall container for columns */\n.columns {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n/* Main column */\n.column.is-9 {\n  flex: 0 0 75%;\n  max-width: 75%;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n/* Title styling */\n.title {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 20px;\n}\n\n/* Review wrapper styling */\n.review-wrapper {\n  border: 1px solid #ddd;\n  padding: 15px;\n  margin-bottom: 20px;\n  border-radius: 8px;\n  background-color: #f9f9f9;\n}\n\n/* Review text styling */\n.review-wrapper__text {\n  margin-top: 10px;\n  font-size: 16px;\n}\n\n/* Form styling */\nform {\n  margin-top: 30px;\n}\n\nform label {\n  display: block;\n  font-size: 16px;\n  margin-bottom: 5px;\n}\n\nform textarea,\nform input[type=\"number\"] {\n  width: 40%;\n  padding: 10px;\n  margin-bottom: 15px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-size: 16px;\n  box-sizing: border-box;\n}\n\nform button {\n  padding: 10px 15px;\n  background-color: black;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n\n</style>\n\n<script>\nimport axios from \"axios\";\nimport { toast } from \"bulma-toast\";\n\nexport default {\n  name: \"Product\",\n  data() {\n    return {\n      product: {},\n      review: {},\n      reviews: {},\n      quantity: 1,\n      user_id: null,\n      user_info: {},\n      userreviewid: [],\n      review_userid_List: [],\n    };\n  },\n  mounted() {\n    this.getProduct(), this.getProductReviews(), this.getUserInfo();\n  },\n  methods: {\n    async getProduct() {\n      this.$store.commit(\"setIsLoading\", true);\n\n      const category_slug = this.$route.params.category_slug;\n      const product_slug = this.$route.params.product_slug;\n\n      await axios\n        .get(`/api/v1/products/${category_slug}/${product_slug}`)\n        .then((response) => {\n          this.product = response.data;\n\n          document.title = this.product.name + \" | Glee\";\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      this.$store.commit(\"setIsLoading\", false);\n    },\n\n    async getUserInfo() {\n      await axios\n        .get(\"api/v1/users/me/\", {\n          headers: {\n            Authorization: `Token ${localStorage.getItem(\"token\")}`,\n          },\n        })\n        .then((response) => {\n          this.user_info = response.data;\n          this.user_id = response.data.id;\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n\n    async getProductReviews() {\n      const category_slug = this.$route.params.category_slug;\n      const product_slug = this.$route.params.product_slug;\n\n      await axios\n        .get(`/api/v1/products/${category_slug}/${product_slug}/reviews`)\n        .then((response) => {\n          this.reviews = response.data;\n          this.review_userid_List = this.reviews.map((review) => review.user);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n\n    async submitReview() {\n      if (this.review_userid_List.includes(this.user_id))\n        // Checking whether the user has left a review for this product\n        toast({\n          message: \"You already have a review for this product!\",\n          type: \"is-warning\",\n          position: \"center\",\n          duration: 3000,\n        });\n      else\n        try {\n          const category_slug = this.$route.params.category_slug;\n          const product_slug = this.$route.params.product_slug;\n\n          const reviewData = {\n            user: this.user_id,\n            content: this.review.content,\n            stars: this.review.stars,\n          };\n\n          const response = await axios.post(\n            `/api/v1/products/${category_slug}/${product_slug}/reviews/`,\n            reviewData\n          );\n          console.log(\"Server response:\", response.data);\n\n          this.review = {};\n          this.getProductReviews();\n\n          toast({\n            message: \"Review sent successfully\",\n            type: \"is-success\",\n            position: \"bottom-right\",\n            duration: 3000,\n          });\n        } catch (error) {\n          console.error(\"Error sending review:\", error.response.data);\n\n          toast({\n            message: \"Error sending review\",\n            type: \"is-danger\",\n            position: \"bottom-right\",\n            duration: 3000,\n          });\n        }\n    },\n\n    addToCart() {\n      if (isNaN(this.quantity) || this.quantity < 1) {\n        this.quantity = 1;\n      }\n\n      const item = {\n        product: this.product,\n        quantity: this.quantity,\n      };\n\n      this.$store.commit(\"addToCart\", item);\n\n      toast({\n        message: \"The product was added to the cart\",\n        type: \"is-success\",\n        dismissible: true,\n        pauseOnHover: true,\n        duration: 2000,\n        position: \"bottom-right\",\n      });\n    },\n  },\n};\n</script>\n"],"mappings":";;;;;;;;EACO,SAAM;AAAc;;EAClB,SAAM;AAAe;;EACnB,SAAM;AAAuB;;EACxB,SAAM;AAAY;iBAJlC;;EASW,SAAM;AAA4B;;EACjC,SAAM;AAAsB;;sBAGhCA,mBAAA,CAA8D;IAAzD,SAAM,qBAAqB;IAAC,oBAAkB,EAAC;;;;EACjD,SAAM;AAAsB;;EAC5B,SAAM;AAAqB;;EAGzB,SAAM;AAAuB;;EAC3B,SAAM;AAAS;;EAIf,SAAM;AAAS;;EAMrB,SAAM;AAAsB;;EAC1B,SAAM;AAAa;;sBACtBA,mBAAA,CAA+B;IAA3B,SAAM;EAAO,GAAC,UAAQ;AAAA;;sBAExBA,mBAAA,CAAoC;IAAjC,SAAM;EAAO,GAAC,iBAAe;AAAA;;EAG7B,SAAM;AAAsB;;sBAO7BA,mBAAA,CAAsC;IAA/B,OAAI;EAAS,GAAC,WAAS;AAAA;;sBAI9BA,mBAAA,CAA6B;IAAtB,OAAI;EAAO,GAAC,IAAE;AAAA;;sBASrBA,mBAAA,CAAqC;IAA7BC,IAAI,EAAC;EAAQ,GAAC,QAAM;AAAA;;uBAvDtCC,mBAAA,CA4DM,OA5DNC,UA4DM,GA3DJH,mBAAA,CA0BM,OA1BNI,UA0BM,GAzBJJ,mBAAA,CAKM,OALNK,UAKM,GAJJL,mBAAA,CAGS,UAHTM,UAGS,GAFPN,mBAAA,CAA0C;IAA9BO,GAAG,EAAEC,KAAA,CAAAC,OAAO,CAACC;0BALnCC,UAAA,E,KASMX,mBAAA,CAkBM,OAlBNY,UAkBM,GAjBJZ,mBAAA,CAEK,MAFLa,UAEK,EAAAC,gBAAA,CADAN,KAAA,CAAAC,OAAO,CAACM,IAAI,kBAEjBC,UAA8D,EAC9DhB,mBAAA,CAAwD,KAAxDiB,UAAwD,EAAxB,GAAC,GAAAH,gBAAA,CAAGN,KAAA,CAAAC,OAAO,CAACS,KAAK,kBACjDlB,mBAAA,CAEI,KAFJmB,WAEI,EAAAL,gBAAA,CADCN,KAAA,CAAAC,OAAO,CAACW,WAAW,kBAExBpB,mBAAA,CAQM,OARNqB,WAQM,GAPJrB,mBAAA,CAEM,OAFNsB,WAEM,G,gBADJtB,mBAAA,CAAgE;IAAzDC,IAAI,EAAC,QAAQ;IAAC,SAAM,OAAO;IAACsB,GAAG,EAAC,GAAG;IApBtD,uBAAAC,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAoBgEjB,KAAA,CAAAkB,QAAQ,GAAAD,MAAA;IAAA;iDAARjB,KAAA,CAAAkB,QAAQ,E,KAG9D1B,mBAAA,CAEM,OAFN2B,WAEM,GADJ3B,mBAAA,CAA8D;IAA3D,SAAM,gBAAgB;IAAE4B,OAAK,EAAAJ,MAAA,QAAAA,MAAA;MAAA,OAAEK,QAAA,CAAAC,SAAA,IAAAD,QAAA,CAAAC,SAAA,CAAAC,KAAA,CAAAF,QAAA,EAAAG,SAAA,CAAS;IAAA;KAAE,eAAa,E,SAKlEhC,mBAAA,CA+BM,OA/BNiC,WA+BM,GA9BJjC,mBAAA,CA6BM,OA7BNkC,WA6BM,GA5BJC,WAA+B,G,kBAC/BjC,mBAAA,CAMMkC,SAAA,QAtCdC,WAAA,CAgC8B7B,KAAA,CAAA8B,OAAO,EAhCrC,UAgCoBC,MAAM;yBAAlBrC,mBAAA,CAMM;MAN0BsC,GAAG,EAAED,MAAM,CAACE,EAAE;MAAE,SAAM;QACpDC,WAAoC,EACpC1C,mBAAA,CAA4C,WAAzC,aAAW,GAAAc,gBAAA,CAAGyB,MAAM,CAACI,IAAI,CAACC,QAAQ,kBACrC5C,mBAAA,CAAkC,WAA/B,WAAS,GAAAc,gBAAA,CAAGyB,MAAM,CAACM,KAAK,kBAC3B7C,mBAAA,CAAmE,KAAnE8C,WAAmE,EAAnC,aAAW,GAAAhC,gBAAA,CAAGyB,MAAM,CAACQ,OAAO,kBAC5D/C,mBAAA,CAAqC,WAAlC,SAAO,GAAAc,gBAAA,CAAGyB,MAAM,CAACS,UAAU,iB;kCAGhChD,mBAAA,CAkBM,cAjBJA,mBAAA,CAgBO;IAhBA,SAAM,YAAY;IAAEiD,QAAM,EAAAzB,MAAA,QAAAA,MAAA,MAzC3C0B,cAAA;MAAA,OAyCqDrB,QAAA,CAAAsB,YAAA,IAAAtB,QAAA,CAAAsB,YAAA,CAAApB,KAAA,CAAAF,QAAA,EAAAG,SAAA,CAAY;IAAA;MACrDhC,mBAAA,CAGM,cAFNoD,WAAsC,E,gBACtCpD,mBAAA,CAAoE;IA5ChF,uBAAAwB,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OA4C+BjB,KAAA,CAAA+B,MAAM,CAACQ,OAAO,GAAAtB,MAAA;IAAA;IAAEgB,EAAE,EAAC,SAAS;IAACY,QAAQ,EAAR;iDAA7B7C,KAAA,CAAA+B,MAAM,CAACQ,OAAO,E,KAEjC/C,mBAAA,CASM,cARNsD,WAA6B,E,gBAC7BtD,mBAAA,CAME;IAtDd,uBAAAwB,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAiD8BjB,KAAA,CAAA+B,MAAM,CAACM,KAAK,GAAApB,MAAA;IAAA;IAC5BxB,IAAI,EAAC,QAAQ;IACbwC,EAAE,EAAC,OAAO;IACVY,QAAQ,EAAR,EAAQ;IACRE,GAAG,EAAC;iDAJY/C,KAAA,CAAA+B,MAAM,CAACM,KAAK,E;IAjD1CW,MAAA,EAiDc;EAA6B,E,MAO/BC,WAAqC,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}