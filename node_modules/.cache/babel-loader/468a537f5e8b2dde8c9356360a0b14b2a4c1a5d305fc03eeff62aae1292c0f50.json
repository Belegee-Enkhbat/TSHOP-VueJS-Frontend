{"ast":null,"code":"import _regeneratorRuntime from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _asyncToGenerator from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _excluded = [\"id\"];\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport axios from \"axios\";\nvar postData = ref({\n  name: \"\",\n  slug: \"\",\n  description: \"\",\n  price: 0.0,\n  category_id: 1,\n  // Default or dynamic category ID\n  image: \"uploads/gettyimages-999362376-612x612.jpg\",\n  thumbnail: \"\",\n  thumbnail_name: \"\"\n});\nvar handleFileUpload = function handleFileUpload(key, event) {\n  if (event.target.files && event.target.files.length > 0) {\n    // Get the uploaded file\n    var file = event.target.files[0];\n    console.log(\"zurag\", file);\n    // Create a FileReader\n    var reader = new FileReader();\n    reader.onload = function () {\n      postData[key] = reader.result;\n      postData.thumbnail_name = file.name;\n    };\n    reader.readAsDataURL(file);\n  } else {\n    console.log(\"No file selected.\");\n  }\n};\nvar submitPost = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var _postData$value, id, postDataWithoutId, postDataToSend, csrfToken, response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _postData$value = postData.value, id = _postData$value.id, postDataWithoutId = _objectWithoutProperties(_postData$value, _excluded); // Exclude the 'id' from postData\n          postDataToSend = _objectSpread(_objectSpread({}, postDataWithoutId), {}, {\n            thumbnail: postData.thumbnail,\n            thumbnail_name: postData.thumbnail_name\n          });\n          csrfToken = getCookie(\"csrftoken\");\n          _context.next = 6;\n          return axios.post(\"/api/v1/products/create_product\", postDataToSend, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"X-CSRFToken\": csrfToken\n            }\n          });\n        case 6:\n          response = _context.sent;\n          console.log(\"Response status:\", response.status);\n          if (response.status === 201) {\n            console.log(\"Post created successfully:\", response.data);\n            postData.value.name = \"\";\n            postData.value.slug = \"\";\n            postData.value.description = \"\";\n            postData.value.price = 0.0;\n            postData.value.image = \"uploads/gettyimages-999362376-612x612.jpg\";\n            postData.value.thumbnail = \"/uploads/uploads/gettyimages-999362376-612x612.jpg\";\n            window.alert(\"Бүтээгдэхүүн амжилттай үүслээ\");\n          } else {\n            console.error(\"Failed to create post:\", response.status, response.data);\n          }\n          _context.next = 14;\n          break;\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(\"Error creating post:\", _context.t0);\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n  return function submitPost() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n// Utility to fetch CSRF token\nfunction getCookie(name) {\n  var cookieValue = null;\n  if (document.cookie && document.cookie !== \"\") {\n    var cookies = document.cookie.split(\";\");\n    for (var i = 0; i < cookies.length; i++) {\n      var cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === name + \"=\") {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}","map":{"version":3,"names":["axios","postData","ref","name","slug","description","price","category_id","image","thumbnail","thumbnail_name","handleFileUpload","key","event","target","files","length","file","console","log","reader","FileReader","onload","result","readAsDataURL","submitPost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_postData$value","id","postDataWithoutId","postDataToSend","csrfToken","response","wrap","_callee$","_context","prev","next","value","_objectWithoutProperties","_excluded","_objectSpread","getCookie","post","headers","sent","status","data","window","alert","error","t0","stop","apply","arguments","cookieValue","document","cookie","cookies","split","i","trim","substring","decodeURIComponent"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/ManageProduct.vue"],"sourcesContent":["<template>\n  <div class=\"form-container\">\n    <h1>Create New Product</h1>\n    <form @submit.prevent=\"submitPost\">\n      <div>\n        <label for=\"name\">Name:</label>\n        <input type=\"text\" id=\"name\" v-model=\"postData.name\" required />\n      </div>\n      <div>\n        <label for=\"slug\">Slug:</label>\n        <input type=\"text\" id=\"slug\" v-model=\"postData.slug\" required />\n      </div>\n      <div>\n        <label for=\"description\">Description:</label>\n        <textarea id=\"description\" v-model=\"postData.description\" required></textarea>\n      </div>\n      <div class=\"option-container\">\n          <label for=\"options\">Choose an option:</label>\n          <select id=\"options\" name=\"options\">\n              <option value=\"1\">Утас</option>\n              <option value=\"7\">Камер</option>\n              <option value=\"8\">Компвьютер</option>\n              <option value=\"9\">Speaker</option>\n          </select>\n      </div>\n      <div>\n        <label for=\"price\">Price:</label>\n        <input type=\"number\" id=\"price\" v-model.number=\"postData.price\" required min=\"0\" />\n      </div>\n      <div>\n        <label for=\"image\">Image:</label>\n        <input type=\"file\" id=\"image\" @change=\"handleFileUpload('image', $event)\" />\n      </div>\n      <div>\n        <label for=\"thumbnail\">Thumbnail:</label>\n        <input type=\"file\" id=\"thumbnail\" @change=\"handleFileUpload('thumbnail', $event)\" />\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nconst postData = ref({\n  name: \"\",\n  slug: \"\",\n  description: \"\",\n  price: 0.0,\n  category_id: 1, // Default or dynamic category ID\n  image: \"uploads/gettyimages-999362376-612x612.jpg\",\n  thumbnail: \"\",\n  thumbnail_name:\"\",\n});\n\nconst handleFileUpload = (key, event) => {\n  if (event.target.files && event.target.files.length > 0) {\n    // Get the uploaded file\n    const file = event.target.files[0]; \n    console.log(\"zurag\", file);\n    // Create a FileReader\n    const reader = new FileReader(); \n    reader.onload = () => {\n      postData[key] = reader.result;\n      postData.thumbnail_name = file.name;\n    };\n    reader.readAsDataURL(file); \n  } else {\n    console.log(\"No file selected.\");\n  }\n};\n\nconst submitPost = async () => {\n  try {\n    const { id, ...postDataWithoutId } = postData.value; // Exclude the 'id' from postData\n    const postDataToSend = { ...postDataWithoutId, thumbnail: postData.thumbnail, thumbnail_name: postData.thumbnail_name };\n\n    const csrfToken = getCookie(\"csrftoken\");\n    const response = await axios.post(\n      \"/api/v1/products/create_product\",\n      postDataToSend,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": csrfToken,\n        },\n      }\n    );\n    console.log(\"Response status:\", response.status);\n    if (response.status === 201) {\n      console.log(\"Post created successfully:\", response.data);\n      postData.value.name = \"\";\n      postData.value.slug = \"\";\n      postData.value.description = \"\";\n      postData.value.price = 0.0;\n      postData.value.image = \"uploads/gettyimages-999362376-612x612.jpg\";\n      postData.value.thumbnail =\n        \"/uploads/uploads/gettyimages-999362376-612x612.jpg\";\n      window.alert(\"Бүтээгдэхүүн амжилттай үүслээ\");\n    } \n    else {\n      console.error(\"Failed to create post:\", response.status, response.data);\n    }\n  } catch (error) {\n    console.error(\"Error creating post:\", error);\n  }\n};\n\n// Utility to fetch CSRF token\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== \"\") {\n    const cookies = document.cookie.split(\";\");\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === name + \"=\") {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n</script>\n\n<style scoped lang=\"scss\">\n.form-container {\n  max-width: 400px;\n  margin: 0 auto;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  background-color: #f9f9f9;\n}\n\n.form-container label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\n.form-container input[type=\"text\"],\n.form-container input[type=\"number\"],\n.form-container input[type=\"file\"],\n.form-container textarea,\n.form-container select {\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  box-sizing: border-box;\n}\n\n.form-container button {\n  padding: 8px 12px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.form-container button:hover {\n  background-color: #0056b3;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}