{"ast":null,"code":"import _regeneratorRuntime from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/web.timers.js\";\nrequire(\"@/assets/css/style.min.css\");\nimport axios from \"axios\";\nexport default {\n  name: \"LogIn\",\n  data: function data() {\n    return {\n      username: \"\",\n      password: \"\",\n      errors: []\n    };\n  },\n  mounted: function mounted() {\n    document.title = \"Log In \";\n  },\n  methods: {\n    submitForm: function submitForm() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var formData;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              axios.defaults.headers.common[\"Authorization\"] = \"\";\n              localStorage.removeItem(\"token\");\n              localStorage.removeItem(\"user\");\n              formData = {\n                username: _this.username,\n                password: _this.password\n              };\n              _context.next = 6;\n              return axios.post(\"/api/v1/token/login/\", formData).then(function (response) {\n                var token = response.data.auth_token;\n                _this.$store.commit(\"setToken\", token);\n                _this.$store.commit(\"setUser\", _this.username);\n                axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token;\n                localStorage.setItem(\"user\", _this.username);\n                localStorage.setItem(\"token\", token);\n                var toPath = _this.$route.query.to || \"/\";\n                _this.$router.push(toPath);\n                setTimeout(function () {\n                  window.location.reload();\n                }, 100);\n              })[\"catch\"](function (error) {\n                if (error.response) {\n                  for (var property in error.response.data) {\n                    _this.errors.push(\"\".concat(property, \": \").concat(error.response.data[property]));\n                  }\n                } else {\n                  _this.errors.push(\"Something went wrong. Please try again\");\n                  console.log(JSON.stringify(error));\n                }\n              });\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["require","axios","name","data","username","password","errors","mounted","document","title","methods","submitForm","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","wrap","_callee$","_context","prev","next","defaults","headers","common","localStorage","removeItem","post","then","response","token","auth_token","$store","commit","setItem","toPath","$route","query","to","$router","push","setTimeout","window","location","reload","error","property","concat","console","log","JSON","stringify","stop"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/LogIn.vue"],"sourcesContent":["<template>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Glee</title>\n    <link rel=\"stylesheet\" href=\"../assets/css/style.min.css\" />\n  </head>\n  <div class=\"page-log-in\">\n    <div class=\"page-name\">\n      <div class=\"page-name__inner\">\n        <div class=\"container\">\n          <h2 class=\"title\">Нэвтрэх</h2>\n          <div class=\"breadcrumbs\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"columns\">\n      <div class=\"column is-4 is-offset-4\">\n        <form class=\"modal__form\" @submit.prevent=\"submitForm\">\n          <div class=\"field\">\n            <label>Хэрэглэгчийн нэр</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" id=\"username\" v-model=\"username\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>Нууц үг</label>\n            <div class=\"control\">\n              <input type=\"password\" class=\"input\" id=\"password\" v-model=\"password\" />\n            </div>\n          </div>\n\n          <div class=\"notification is-danger\" v-if=\"errors.length\">\n            <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n          </div>\n\n          <div class=\"field\">\n            <div class=\"control\">\n              <button class=\"button is-dark\" id=\"login\">Нэвтрэх</button>\n            </div>\n          </div>\n\n          <hr />\n\n          Эсвэл <router-link to=\"/sign-up\">энд дарж</router-link> бүртгүүлнэ үү!\n        </form>\n      </div>\n    </div>\n  </div>\n\n  <main class=\"main\">\n    <section class=\"modal\">\n      <div class=\"container\">\n        <form class=\"modal__form\" action=\"#\">\n          <label class=\"modal__label\">\n            Username or email address *\n            <input class=\"modal__input\" type=\"text\" required />\n          </label>\n          <label class=\"modal__label\">\n            Password *\n            <input class=\"modal__input\" type=\"password\" required />\n          </label>\n          <button class=\"modal__btn-login\" type=\"submit\">Login</button>\n          <div class=\"modal__lost\">\n            <label>\n              <input type=\"checkbox\" />\n              Remember me\n            </label>\n            <a class=\"modal__lost-password\" href=\"#\"> Lost your password? </a>\n          </div>\n        </form>\n        <p class=\"modal__register-question\" href=\"#\">\n          Not registered? No problem\n        </p>\n        <a class=\"modal__create-acclink\" href=\"#\"> Create an account </a>\n      </div>\n    </section>\n  </main>\n</template>\n\n<script>\nrequire(\"@/assets/css/style.min.css\");\nimport axios from \"axios\";\n\nexport default {\n  name: \"LogIn\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      errors: [],\n    };\n  },\n  mounted() {\n    document.title = \"Log In \";\n  },\n  methods: {\n    async submitForm() {\n      axios.defaults.headers.common[\"Authorization\"] = \"\";\n\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n\n      const formData = {\n        username: this.username,\n        password: this.password,\n      };\n\n      await axios\n        .post(\"/api/v1/token/login/\", formData)\n        .then((response) => {\n          const token = response.data.auth_token;\n\n          this.$store.commit(\"setToken\", token);\n          this.$store.commit(\"setUser\", this.username);\n          axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token;\n          localStorage.setItem(\"user\", this.username);\n          localStorage.setItem(\"token\", token);\n\n          const toPath = this.$route.query.to || \"/\";\n          this.$router.push(toPath);\n          setTimeout(() => {\n            window.location.reload();\n          }, 100);\n        })\n        .catch((error) => {\n          if (error.response) {\n            for (const property in error.response.data) {\n              this.errors.push(`${property}: ${error.response.data[property]}`);\n            }\n          } else {\n            this.errors.push(\"Something went wrong. Please try again\");\n\n            console.log(JSON.stringify(error));\n          }\n        });\n    },\n  },\n};\n</script>\n"],"mappings":";;;;;;;AAoFAA,OAAO,CAAC,4BAA4B,CAAC;AACrC,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,IAAI,WAAAA,KAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE;IACV,CAAC;EACH,CAAC;EACDC,OAAO,WAAAA,QAAA,EAAG;IACRC,QAAQ,CAACC,KAAI,GAAI,SAAS;EAC5B,CAAC;EACDC,OAAO,EAAE;IACDC,UAAU,WAAAA,WAAA,EAAG;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,QAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACjBrB,KAAK,CAACsB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,EAAE;cAEnDC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;cAChCD,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;cAEzBV,QAAO,GAAI;gBACfb,QAAQ,EAAEQ,KAAI,CAACR,QAAQ;gBACvBC,QAAQ,EAAEO,KAAI,CAACP;cACjB,CAAC;cAAAe,QAAA,CAAAE,IAAA;cAAA,OAEKrB,KAAI,CACP2B,IAAI,CAAC,sBAAsB,EAAEX,QAAQ,EACrCY,IAAI,CAAC,UAACC,QAAQ,EAAK;gBAClB,IAAMC,KAAI,GAAID,QAAQ,CAAC3B,IAAI,CAAC6B,UAAU;gBAEtCpB,KAAI,CAACqB,MAAM,CAACC,MAAM,CAAC,UAAU,EAAEH,KAAK,CAAC;gBACrCnB,KAAI,CAACqB,MAAM,CAACC,MAAM,CAAC,SAAS,EAAEtB,KAAI,CAACR,QAAQ,CAAC;gBAC5CH,KAAK,CAACsB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,QAAO,GAAIM,KAAK;gBACjEL,YAAY,CAACS,OAAO,CAAC,MAAM,EAAEvB,KAAI,CAACR,QAAQ,CAAC;gBAC3CsB,YAAY,CAACS,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;gBAEpC,IAAMK,MAAK,GAAIxB,KAAI,CAACyB,MAAM,CAACC,KAAK,CAACC,EAAC,IAAK,GAAG;gBAC1C3B,KAAI,CAAC4B,OAAO,CAACC,IAAI,CAACL,MAAM,CAAC;gBACzBM,UAAU,CAAC,YAAM;kBACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;gBAC1B,CAAC,EAAE,GAAG,CAAC;cACT,CAAC,UACK,CAAC,UAACC,KAAK,EAAK;gBAChB,IAAIA,KAAK,CAAChB,QAAQ,EAAE;kBAClB,KAAK,IAAMiB,QAAO,IAAKD,KAAK,CAAChB,QAAQ,CAAC3B,IAAI,EAAE;oBAC1CS,KAAI,CAACN,MAAM,CAACmC,IAAI,IAAAO,MAAA,CAAID,QAAQ,QAAAC,MAAA,CAAKF,KAAK,CAAChB,QAAQ,CAAC3B,IAAI,CAAC4C,QAAQ,CAAC,CAAE,CAAC;kBACnE;gBACF,OAAO;kBACLnC,KAAI,CAACN,MAAM,CAACmC,IAAI,CAAC,wCAAwC,CAAC;kBAE1DQ,OAAO,CAACC,GAAG,CAACC,IAAI,CAACC,SAAS,CAACN,KAAK,CAAC,CAAC;gBACpC;cACF,CAAC,CAAC;YAAA;YAAA;cAAA,OAAA1B,QAAA,CAAAiC,IAAA;UAAA;QAAA,GAAArC,OAAA;MAAA;IACN;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}