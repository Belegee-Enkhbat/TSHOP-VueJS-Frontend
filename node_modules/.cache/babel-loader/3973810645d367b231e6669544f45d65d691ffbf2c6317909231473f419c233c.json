{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"page-my-account\"\n};\nvar _hoisted_2 = {\n  \"class\": \"columns is-multiline\"\n};\nvar _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  \"class\": \"column is-12\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", {\n  \"class\": \"title\"\n}, \"My account\")], -1 /* HOISTED */);\nvar _hoisted_4 = {\n  \"class\": \"column is-12\"\n};\nvar _hoisted_5 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nvar _hoisted_6 = {\n  \"class\": \"column is-12\"\n};\nvar _hoisted_7 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  \"class\": \"subtitle\"\n}, \"My orders\", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_OrderSummary = _resolveComponent(\"OrderSummary\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.logoutHandler();\n    }),\n    \"class\": \"button is-danger\"\n  }, \"Log out\")]), _hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orders, function (order) {\n    return _openBlock(), _createBlock(_component_OrderSummary, {\n      key: order.id,\n      order: order\n    }, null, 8 /* PROPS */, [\"order\"]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","$event","_ctx","logoutHandler","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","$data","orders","order","_createBlock","_component_OrderSummary","key","id"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/MyAccount.vue"],"sourcesContent":["<template>\n  <div class=\"page-my-account\">\n    <div class=\"columns is-multiline\">\n      <div class=\"column is-12\">\n        <h1 class=\"title\">My account</h1>\n      </div>\n\n      <div class=\"column is-12\">\n        <button @click=\"logoutHandler()\" class=\"button is-danger\">Log out</button>\n      </div>\n\n      <hr />\n\n      <div class=\"column is-12\">\n        <h2 class=\"subtitle\">My orders</h2>\n        <OrderSummary v-for=\"order in orders\" v-bind:key=\"order.id\" v-bind:order=\"order\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { logout } from \"@/store/LogoutService\";\nimport OrderSummary from \"@/components/OrderSummary.vue\";\n\nexport default {\n  name: \"MyAccount\",\n  components: {\n    OrderSummary,\n  },\n  data() {\n    return {\n      orders: [],\n    };\n  },\n  mounted() {\n    document.title = \"My account | Glee\";\n\n    this.getMyOrders();\n  },\n  methods: {\n    logout() {\n      axios.defaults.headers.common[\"Authorization\"] = \"\";\n\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"username\");\n      localStorage.removeItem(\"userid\");\n      localStorage.removeItem(\"user\");\n\n      this.$store.commit(\"removeToken\");\n\n      const toPath = this.$route.query.to || \"/\";\n      this.$router.push(toPath);\n      setTimeout(() => {\n        window.location.reload();\n      }, 100);\n    },\n    async getMyOrders() {\n      this.$store.commit(\"setIsLoading\", true);\n\n      await axios\n        .get(\"/api/v1/orders/\")\n        .then((response) => {\n          this.orders = response.data;\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n\n      this.$store.commit(\"setIsLoading\", false);\n    },\n  },\n};\n</script>\n"],"mappings":";;EACO,SAAM;AAAiB;;EACrB,SAAM;AAAsB;8BAC/BA,mBAAA,CAEM;EAFD,SAAM;AAAc,I,aACvBA,mBAAA,CAAiC;EAA7B,SAAM;AAAO,GAAC,YAAU,E;;EAGzB,SAAM;AAAc;8BAIzBA,mBAAA,CAAM;;EAED,SAAM;AAAc;8BACvBA,mBAAA,CAAmC;EAA/B,SAAM;AAAU,GAAC,WAAS;;;uBAbpCC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJF,mBAAA,CAeM,OAfNG,UAeM,GAdJC,UAEM,EAENJ,mBAAA,CAEM,OAFNK,UAEM,GADJL,mBAAA,CAA0E;IAAjEM,OAAK,EAAAC,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAAEC,IAAA,CAAAC,aAAa;IAAA;IAAI,SAAM;KAAmB,SAAO,E,GAGnEC,UAAM,EAENX,mBAAA,CAGM,OAHNY,UAGM,GAFJC,UAAmC,G,kBACnCZ,mBAAA,CAAmFa,SAAA,QAf3FC,WAAA,CAesCC,KAAA,CAAAC,MAAM,EAf5C,UAe6BC,KAAK;yBAA1BC,YAAA,CAAmFC,uBAAA;MAAtCC,GAAG,EAAEH,KAAK,CAACI,EAAE;MAASJ,KAAK,EAAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}