{"ast":null,"code":"import _objectSpread from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _regeneratorRuntime from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/uranbileg/class/TSHOP-VueJS-Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _excluded = [\"id\"];\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"ProductForm\",\n  data: function data() {\n    return {\n      categories: [],\n      postData: {\n        name: \"\",\n        slug: \"\",\n        description: \"\",\n        price: 0.0,\n        category_id: \"\",\n        // Default or dynamic category ID\n        image: null,\n        thumbnail: null,\n        thumbnail_name: \"\"\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.fetchCategories();\n  },\n  methods: {\n    fetchCategories: function fetchCategories() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"/api/v1/products/categories/\");\n            case 3:\n              response = _context.sent;\n              _this.categories = response.data;\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(\"Error fetching categories:\", _context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 7]]);\n      }))();\n    },\n    handleFileUpload: function handleFileUpload(type, event) {\n      var _this2 = this;\n      if (event.target.files && event.target.files.length > 0) {\n        var file = event.target.files[0];\n        var reader = new FileReader();\n        reader.onload = function () {\n          _this2.postData[type] = reader.result;\n          if (type === \"thumbnail\") {\n            _this2.postData.thumbnail_name = file.name;\n          }\n        };\n        reader.readAsDataURL(file);\n      } else {\n        console.log(\"No file selected.\");\n      }\n    },\n    submitPost: function submitPost() {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _this3$postData, id, postDataWithoutId, postDataToSend, csrfToken, response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _this3$postData = _this3.postData, id = _this3$postData.id, postDataWithoutId = _objectWithoutProperties(_this3$postData, _excluded); // Exclude the 'id' from postData\n              postDataToSend = _objectSpread(_objectSpread({}, postDataWithoutId), {}, {\n                thumbnail: _this3.postData.thumbnail,\n                thumbnail_name: _this3.postData.thumbnail_name\n              });\n              csrfToken = _this3.getCookie(\"csrftoken\");\n              _context2.next = 6;\n              return axios.post(\"/api/v1/products/create_product\", postDataToSend, {\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"X-CSRFToken\": csrfToken\n                }\n              });\n            case 6:\n              response = _context2.sent;\n              if (response.status === 201) {\n                console.log(\"Post created successfully:\", response.data);\n                _this3.resetForm();\n                window.alert(\"Бүтээгдэхүүн амжилттай үүслээ\");\n              } else {\n                console.error(\"Failed to create post:\", response.status, response.data);\n              }\n              _context2.next = 13;\n              break;\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(\"Error creating post:\", _context2.t0);\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 10]]);\n      }))();\n    },\n    resetForm: function resetForm() {\n      this.postData = {\n        name: \"\",\n        slug: \"\",\n        description: \"\",\n        price: 0.0,\n        category_id: \"\",\n        image: null,\n        thumbnail: null,\n        thumbnail_name: \"\"\n      };\n    },\n    getCookie: function getCookie(name) {\n      var cookieValue = null;\n      if (document.cookie && document.cookie !== \"\") {\n        var cookies = document.cookie.split(\";\");\n        for (var i = 0; i < cookies.length; i++) {\n          var cookie = cookies[i].trim();\n          if (cookie.substring(0, name.length + 1) === name + \"=\") {\n            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n            break;\n          }\n        }\n      }\n      return cookieValue;\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","categories","postData","slug","description","price","category_id","image","thumbnail","thumbnail_name","mounted","fetchCategories","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","t0","console","error","stop","handleFileUpload","type","event","_this2","target","files","length","file","reader","FileReader","onload","result","readAsDataURL","log","submitPost","_this3","_callee2","_this3$postData","id","postDataWithoutId","postDataToSend","csrfToken","_callee2$","_context2","_objectWithoutProperties","_excluded","_objectSpread","getCookie","post","headers","status","resetForm","window","alert","cookieValue","document","cookie","cookies","split","i","trim","substring","decodeURIComponent"],"sources":["/home/uranbileg/class/TSHOP-VueJS-Frontend/src/views/ManageProduct.vue"],"sourcesContent":["<template>\n  <div class=\"form-container\">\n    <h1>Create New Product</h1>\n    <form @submit.prevent=\"submitPost\">\n      <div>\n        <label for=\"name\">Name:</label>\n        <input type=\"text\" id=\"name\" v-model=\"postData.name\" required />\n      </div>\n      <div>\n        <label for=\"slug\">Slug:</label>\n        <input type=\"text\" id=\"slug\" v-model=\"postData.slug\" required />\n      </div>\n      <div>\n        <label for=\"description\">Description:</label>\n        <textarea id=\"description\" v-model=\"postData.description\" required></textarea>\n      </div>\n      <div>\n        <label for=\"category\">Category:</label>\n        <select id=\"category\" v-model=\"postData.category_id\" required>\n          <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\n            {{ category.name }}\n          </option>\n        </select>\n      </div>\n      <div>\n        <label for=\"price\">Price:</label>\n        <input type=\"number\" id=\"price\" v-model.number=\"postData.price\" required min=\"0\" />\n      </div>\n      <div>\n        <label for=\"image\">Image:</label>\n        <input type=\"file\" id=\"image\" @change=\"handleFileUpload('image', $event)\" />\n      </div>\n      <div>\n        <label for=\"thumbnail\">Thumbnail:</label>\n        <input type=\"file\" id=\"thumbnail\" @change=\"handleFileUpload('thumbnail', $event)\" />\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"ProductForm\",\n  data() {\n    return {\n      categories: [],\n      postData: {\n        name: \"\",\n        slug: \"\",\n        description: \"\",\n        price: 0.0,\n        category_id: \"\", // Default or dynamic category ID\n        image: null,\n        thumbnail: null,\n        thumbnail_name: \"\",\n      },\n    };\n  },\n  mounted() {\n    this.fetchCategories();\n  },\n  methods: {\n    async fetchCategories() {\n      try {\n        const response = await axios.get(\"/api/v1/products/categories/\");\n        this.categories = response.data;\n      } catch (error) {\n        console.error(\"Error fetching categories:\", error);\n      }\n    },\n    handleFileUpload(type, event) {\n      if (event.target.files && event.target.files.length > 0) {\n        const file = event.target.files[0];\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.postData[type] = reader.result;\n          if (type === \"thumbnail\") {\n            this.postData.thumbnail_name = file.name;\n          }\n        };\n        reader.readAsDataURL(file);\n      } else {\n        console.log(\"No file selected.\");\n      }\n    },\n    async submitPost() {\n      try {\n        const { id, ...postDataWithoutId } = this.postData; // Exclude the 'id' from postData\n        const postDataToSend = { ...postDataWithoutId, thumbnail: this.postData.thumbnail, thumbnail_name: this.postData.thumbnail_name };\n\n        const csrfToken = this.getCookie(\"csrftoken\");\n        const response = await axios.post(\"/api/v1/products/create_product\", postDataToSend, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-CSRFToken\": csrfToken,\n          },\n        });\n\n        if (response.status === 201) {\n          console.log(\"Post created successfully:\", response.data);\n          this.resetForm();\n          window.alert(\"Бүтээгдэхүүн амжилттай үүслээ\");\n        } else {\n          console.error(\"Failed to create post:\", response.status, response.data);\n        }\n      } catch (error) {\n        console.error(\"Error creating post:\", error);\n      }\n    },\n    resetForm() {\n      this.postData = {\n        name: \"\",\n        slug: \"\",\n        description: \"\",\n        price: 0.0,\n        category_id: \"\",\n        image: null,\n        thumbnail: null,\n        thumbnail_name: \"\",\n      };\n    },\n    getCookie(name) {\n      let cookieValue = null;\n      if (document.cookie && document.cookie !== \"\") {\n        const cookies = document.cookie.split(\";\");\n        for (let i = 0; i < cookies.length; i++) {\n          const cookie = cookies[i].trim();\n          if (cookie.substring(0, name.length + 1) === name + \"=\") {\n            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n            break;\n          }\n        }\n      }\n      return cookieValue;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.form-container {\n  max-width: 400px;\n  margin: 0 auto;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  background-color: #f9f9f9;\n}\n\n.form-container label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\n.form-container input[type=\"text\"],\n.form-container input[type=\"number\"],\n.form-container input[type=\"file\"],\n.form-container textarea,\n.form-container select {\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  box-sizing: border-box;\n}\n\n.form-container button {\n  padding: 8px 12px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.form-container button:hover {\n  background-color: #0056b3;\n}\n</style>\n"],"mappings":";;;;;;;AA0CA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,IAAI,WAAAA,KAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,EAAE;MACdC,QAAQ,EAAE;QACRH,IAAI,EAAE,EAAE;QACRI,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,EAAE;QACfC,KAAK,EAAE,GAAG;QACVC,WAAW,EAAE,EAAE;QAAE;QACjBC,KAAK,EAAE,IAAI;QACXC,SAAS,EAAE,IAAI;QACfC,cAAc,EAAE;MAClB;IACF,CAAC;EACH,CAAC;EACDC,OAAO,WAAAA,QAAA,EAAG;IACR,IAAI,CAACC,eAAe,CAAC,CAAC;EACxB,CAAC;EACDC,OAAO,EAAE;IACDD,eAAe,WAAAA,gBAAA,EAAG;MAAA,IAAAE,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,QAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEGzB,KAAK,CAAC0B,GAAG,CAAC,8BAA8B,CAAC;YAAA;cAA1DN,QAAO,GAAAG,QAAA,CAAAI,IAAA;cACbZ,KAAI,CAACZ,UAAS,GAAIiB,QAAQ,CAAClB,IAAI;cAAAqB,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAK,EAAA,GAAAL,QAAA;cAE/BM,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAAP,QAAA,CAAAK,EAAO,CAAC;YAAA;YAAA;cAAA,OAAAL,QAAA,CAAAQ,IAAA;UAAA;QAAA,GAAAZ,OAAA;MAAA;IAEtD,CAAC;IACDa,gBAAgB,WAAAA,iBAACC,IAAI,EAAEC,KAAK,EAAE;MAAA,IAAAC,MAAA;MAC5B,IAAID,KAAK,CAACE,MAAM,CAACC,KAAI,IAAKH,KAAK,CAACE,MAAM,CAACC,KAAK,CAACC,MAAK,GAAI,CAAC,EAAE;QACvD,IAAMC,IAAG,GAAIL,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;QAClC,IAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAI,YAAM;UACpBP,MAAI,CAAC/B,QAAQ,CAAC6B,IAAI,IAAIO,MAAM,CAACG,MAAM;UACnC,IAAIV,IAAG,KAAM,WAAW,EAAE;YACxBE,MAAI,CAAC/B,QAAQ,CAACO,cAAa,GAAI4B,IAAI,CAACtC,IAAI;UAC1C;QACF,CAAC;QACDuC,MAAM,CAACI,aAAa,CAACL,IAAI,CAAC;MAC5B,OAAO;QACLV,OAAO,CAACgB,GAAG,CAAC,mBAAmB,CAAC;MAClC;IACF,CAAC;IACKC,UAAU,WAAAA,WAAA,EAAG;MAAA,IAAAC,MAAA;MAAA,OAAA/B,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAA8B,SAAA;QAAA,IAAAC,eAAA,EAAAC,EAAA,EAAAC,iBAAA,EAAAC,cAAA,EAAAC,SAAA,EAAAjC,QAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAiC,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAA/B,IAAA,GAAA+B,SAAA,CAAA9B,IAAA;YAAA;cAAA8B,SAAA,CAAA/B,IAAA;cAAAyB,eAAA,GAEsBF,MAAI,CAAC3C,QAAQ,EAA1C8C,EAAE,GAAAD,eAAA,CAAFC,EAAE,EAAKC,iBAAgB,GAAAK,wBAAA,CAAAP,eAAA,EAAAQ,SAAA,GAAqB;cAC9CL,cAAa,GAAAM,aAAA,CAAAA,aAAA,KAASP,iBAAiB;gBAAEzC,SAAS,EAAEqC,MAAI,CAAC3C,QAAQ,CAACM,SAAS;gBAAEC,cAAc,EAAEoC,MAAI,CAAC3C,QAAQ,CAACO;cAAa;cAExH0C,SAAQ,GAAIN,MAAI,CAACY,SAAS,CAAC,WAAW,CAAC;cAAAJ,SAAA,CAAA9B,IAAA;cAAA,OACtBzB,KAAK,CAAC4D,IAAI,CAAC,iCAAiC,EAAER,cAAc,EAAE;gBACnFS,OAAO,EAAE;kBACP,cAAc,EAAE,kBAAkB;kBAClC,aAAa,EAAER;gBACjB;cACF,CAAC,CAAC;YAAA;cALIjC,QAAO,GAAAmC,SAAA,CAAA5B,IAAA;cAOb,IAAIP,QAAQ,CAAC0C,MAAK,KAAM,GAAG,EAAE;gBAC3BjC,OAAO,CAACgB,GAAG,CAAC,4BAA4B,EAAEzB,QAAQ,CAAClB,IAAI,CAAC;gBACxD6C,MAAI,CAACgB,SAAS,CAAC,CAAC;gBAChBC,MAAM,CAACC,KAAK,CAAC,+BAA+B,CAAC;cAC/C,OAAO;gBACLpC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEV,QAAQ,CAAC0C,MAAM,EAAE1C,QAAQ,CAAClB,IAAI,CAAC;cACzE;cAAAqD,SAAA,CAAA9B,IAAA;cAAA;YAAA;cAAA8B,SAAA,CAAA/B,IAAA;cAAA+B,SAAA,CAAA3B,EAAA,GAAA2B,SAAA;cAEA1B,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAAyB,SAAA,CAAA3B,EAAO,CAAC;YAAA;YAAA;cAAA,OAAA2B,SAAA,CAAAxB,IAAA;UAAA;QAAA,GAAAiB,QAAA;MAAA;IAEhD,CAAC;IACDe,SAAS,WAAAA,UAAA,EAAG;MACV,IAAI,CAAC3D,QAAO,GAAI;QACdH,IAAI,EAAE,EAAE;QACRI,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,EAAE;QACfC,KAAK,EAAE,GAAG;QACVC,WAAW,EAAE,EAAE;QACfC,KAAK,EAAE,IAAI;QACXC,SAAS,EAAE,IAAI;QACfC,cAAc,EAAE;MAClB,CAAC;IACH,CAAC;IACDgD,SAAS,WAAAA,UAAC1D,IAAI,EAAE;MACd,IAAIiE,WAAU,GAAI,IAAI;MACtB,IAAIC,QAAQ,CAACC,MAAK,IAAKD,QAAQ,CAACC,MAAK,KAAM,EAAE,EAAE;QAC7C,IAAMC,OAAM,GAAIF,QAAQ,CAACC,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC;QAC1C,KAAK,IAAIC,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAIF,OAAO,CAAC/B,MAAM,EAAEiC,CAAC,EAAE,EAAE;UACvC,IAAMH,MAAK,GAAIC,OAAO,CAACE,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;UAChC,IAAIJ,MAAM,CAACK,SAAS,CAAC,CAAC,EAAExE,IAAI,CAACqC,MAAK,GAAI,CAAC,MAAMrC,IAAG,GAAI,GAAG,EAAE;YACvDiE,WAAU,GAAIQ,kBAAkB,CAACN,MAAM,CAACK,SAAS,CAACxE,IAAI,CAACqC,MAAK,GAAI,CAAC,CAAC,CAAC;YACnE;UACF;QACF;MACF;MACA,OAAO4B,WAAW;IACpB;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}